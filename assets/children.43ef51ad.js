import{bb as ge,bO as H,k as V,aE as fe,aF as J,o as T,b as G,w as t,m as I,p as e,A as S,q as a,b4 as K,b1 as W,bh as X,b7 as P,bj as Y,z as F,aP as R,bH as Z,bc as q,c as ye,a$ as Ve,j as Ce}from"./index.d0376abb.js";import{_ as be}from"./DataTable.1b688fa1.js";import{a as h}from"./axios.956cc88e.js";import{r as y}from"./validators.03da0656.js";import{V as ee}from"./VSpacer.cba7ed72.js";import{V as b}from"./VBtn.88bd5865.js";import{V as te}from"./VForm.7b3aef50.js";import{V as v,a as d}from"./VRow.3bbc78cc.js";import{V as U}from"./VTextField.92856828.js";import{V as k}from"./VTextarea.1493a88f.js";import{V as le}from"./VSwitch.f21bc77e.js";import{V as oe}from"./VSelect.f6407ce8.js";import{V as ae}from"./VNavigationDrawer.c54447bf.js";import{u as L}from"./categoryStore.af1b5913.js";import{_ as ve}from"./Confirmer.80dc42d6.js";import{u as M}from"./categoryGroupStore.df72e349.js";import{V as j}from"./VChip.87002366.js";import"./VDivider.17d044d3.js";import"./form.af4ba2ee.js";import"./index.852e8fad.js";import"./VInput.71e0e032.js";import"./VSelectionControl.a1c05b0b.js";import"./VList.3972f313.js";import"./dialog-transition.2174bb87.js";import"./VMenu.e1f3b74e.js";import"./VCheckboxBtn.98e56da7.js";import"./ssrBoot.8a991bad.js";import"./VDialog.7aee3e07.js";const Q=ge("CategoryStore",{state:()=>({pagination:{meta:{}},filter:{},categories:[],category:{title_uz:"",title_ru:"",title_en:"",description_uz:"",description_ru:"",description_en:"",content_uz:"",content_ru:"",content_en:"",parent_id:null,status:1,order:null},loading:!1,error:"",categoryChild:{title_uz:"",title_ru:"",title_en:"",description_uz:"",description_ru:"",description_en:"",content_uz:"",content_ru:"",content_en:"",parent_id:null,status:1,order:null},categoryChildren:[],childrenPagination:{meta:{}},childrenLoading:!1}),getters:{getCategoryList(m){return m.categories}},actions:{fetchCategoryChild(m){return new Promise((c,o)=>{h.get(`/dashboard/assessment/sea-category/${m}`).then(r=>{this.categoryChild=r.data.result,c(r.data.result)}).catch(r=>{this.error=r,o(r)}).finally(()=>{this.loading=!1})})},fetchCategoryChildren(m){return this.childrenLoading=!0,m={...{page:this.pagination.meta.current_page,per_page:this.pagination.meta.per_page},...m},new Promise((o,r)=>{h.get("/dashboard/assessment/sea-category",{params:m}).then(i=>{this.categoryChildren=i.data.result,this.childrenPagination.meta=i.data.result.meta,o(i)}).catch(i=>{this.error=i,r(i)}).finally(()=>{this.childrenLoading=!1})})},fetchCategories(m){return this.loading=!0,m={...{page:this.pagination.meta.current_page,per_page:this.pagination.meta.per_page},...m},new Promise((o,r)=>{h.get("/dashboard/assessment/sea-category",{params:m}).then(i=>{this.categories=i.data.result,this.pagination.meta=i.data.result.meta,o(i)}).catch(i=>{this.error=i,r(i)}).finally(()=>{this.loading=!1})})},async deleteCategory(m){return this.loading=!0,new Promise((c,o)=>{h.delete(`/dashboard/assessment/sea-category/${m}`).then(r=>c(r)).catch(r=>{this.error=r,o(r)}).finally(()=>{this.loading=!1})})},addCategory(m){return this.loading=!0,new Promise((c,o)=>{h.post("/dashboard/assessment/sea-category",m).then(r=>c(r)).catch(r=>{this.error=r,o(r)}).finally(()=>{this.loading=!1})})},updateCategory(m,c){return this.loading=!0,new Promise((o,r)=>{h.put(`/dashboard/assessment/sea-category/${m}`,c).then(i=>o(i)).catch(i=>{this.error=i,r(i)}).finally(()=>{this.loading=!1})})},fetchCategory(m){return new Promise((c,o)=>{h.get(`/dashboard/assessment/sea-category/${m}`).then(r=>{this.category=r.data.result,c(r.data.result)}).catch(r=>{this.error=r,o(r)}).finally(()=>{this.loading=!1})})}}}),ze={class:"d-flex align-center pa-6 pb-1"},Ue=I("h6",{class:"text-h6"}," Add Cetegory ",-1),he={__name:"FormCreate",props:{isCreateFormOpened:{default:null,required:!0},categoryGroupOptions:{type:Array}},emits:["update:isCreateFormOpened","formSubmitted"],setup(m,{emit:c}){const o=m,r=H(),i=V(!1),z=V(null),n=fe({title_uz:null,title_ru:null,title_en:null,description_uz:null,description_ru:null,description_en:null,content_uz:null,content_ru:null,content_en:null,parent_id:null,status:1,order:null}),O=()=>{c("update:isCreateFormOpened",!1),R(()=>{x()})},x=()=>{var g,l;(g=z.value)==null||g.reset(),n.content_uz="",n.content_ru="",n.content_en="",(l=z.value)==null||l.resetValidation()},C=()=>{var g;(g=z.value)==null||g.validate().then(({valid:l})=>{l&&(c("formSubmitted",{title_uz:n.title_uz,title_ru:n.title_ru,title_en:n.title_en,description_uz:n.description_uz,description_ru:n.description_ru,description_en:n.description_en,content_uz:n.content_uz,content_ru:n.content_ru,content_en:n.content_en,parent_id:n.parent_id,status:n.status,order:n.order}),c("update:isCreateFormOpened",!1),R(()=>{x()}))})};J(()=>{n.parent_id=parseInt(r.params.category)});const s=g=>{c("update:isCreateFormOpened",g)};return(g,l)=>{const w=Z;return T(),G(ae,{permanent:"",width:1e3,location:"end",class:"scrollable-content","model-value":o.isCreateFormOpened,"onUpdate:modelValue":s},{default:t(()=>[I("div",ze,[Ue,e(ee),e(b,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:O},{default:t(()=>[e(S,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(K),{options:{wheelPropagation:!1}},{default:t(()=>[e(W,{flat:""},{default:t(()=>[e(X,null,{default:t(()=>[e(te,{ref_key:"refCategoryCreateForm",ref:z,modelValue:a(i),"onUpdate:modelValue":l[12]||(l[12]=u=>P(i)?i.value=u:null),onSubmit:Y(C,["prevent"])},{default:t(()=>[e(v,null,{default:t(()=>[e(d,{cols:"4"},{default:t(()=>[e(U,{modelValue:a(n).title_uz,"onUpdate:modelValue":l[0]||(l[0]=u=>a(n).title_uz=u),rules:[a(y)],label:"Title Uz"},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"4"},{default:t(()=>[e(U,{modelValue:a(n).title_ru,"onUpdate:modelValue":l[1]||(l[1]=u=>a(n).title_ru=u),rules:[a(y)],label:"Title Ru"},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"4"},{default:t(()=>[e(U,{modelValue:a(n).title_en,"onUpdate:modelValue":l[2]||(l[2]=u=>a(n).title_en=u),rules:[a(y)],label:"Title En"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(d,{cols:"4"},{default:t(()=>[e(k,{modelValue:a(n).description_uz,"onUpdate:modelValue":l[3]||(l[3]=u=>a(n).description_uz=u),rules:[a(y)],label:"Description Uz"},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"4"},{default:t(()=>[e(k,{modelValue:a(n).description_ru,"onUpdate:modelValue":l[4]||(l[4]=u=>a(n).description_ru=u),rules:[a(y)],label:"Description Ru"},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"4"},{default:t(()=>[e(k,{modelValue:a(n).description_en,"onUpdate:modelValue":l[5]||(l[5]=u=>a(n).description_en=u),rules:[a(y)],label:"Description En"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(w,{label:"Content uz",modelValue:a(n).content_uz,"onUpdate:modelValue":l[6]||(l[6]=u=>a(n).content_uz=u)},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(w,{label:"Content Ru",modelValue:a(n).content_ru,"onUpdate:modelValue":l[7]||(l[7]=u=>a(n).content_ru=u)},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(w,{label:"Content En",modelValue:a(n).content_en,"onUpdate:modelValue":l[8]||(l[8]=u=>a(n).content_en=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{class:"mt-4"},{default:t(()=>[e(d,{cols:"6",md:"4"},{default:t(()=>[e(le,{modelValue:a(n).status,"onUpdate:modelValue":l[9]||(l[9]=u=>a(n).status=u),label:"Status",value:1,color:"primary"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"4"},{default:t(()=>[e(U,{modelValue:a(n).order,"onUpdate:modelValue":l[10]||(l[10]=u=>a(n).order=u),rules:[a(y)],label:"Order"},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"6",md:"4"},{default:t(()=>[e(oe,{modelValue:a(n).parent_id,"onUpdate:modelValue":l[11]||(l[11]=u=>a(n).parent_id=u),items:o.categoryGroupOptions,"item-title":"title","item-value":"id",label:"Parent",disabled:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(b,{type:"submit",class:"me-3",color:"success"},{default:t(()=>[F(" Submit ")]),_:1}),e(b,{type:"reset",variant:"tonal",color:"error",onClick:O},{default:t(()=>[F(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Fe={class:"d-flex align-center pa-6 pb-1"},Oe=I("h6",{class:"text-h6"}," Update Cetegory ",-1),xe={__name:"FormUpdate",props:{isUpdateFormOpened:{default:null,required:!0},category:{type:Object},categoryGroupOptions:{type:Array}},emits:["update:isUpdateFormOpened","formSubmitted"],setup(m,{emit:c}){const o=m;q(L()),L(),V([{id:null,title:null}]),V(null);const r=V(!1),i=V(null);V({filter:{parent_id:null}});const z=()=>{c("update:isUpdateFormOpened",!1),R(()=>{n()})},n=()=>{var C,s;(C=i.value)==null||C.reset(),o.category.content_uz="",o.category.content_ru="",o.category.content_en="",(s=i.value)==null||s.resetValidation()},O=()=>{var C;(C=i.value)==null||C.validate().then(({valid:s})=>{s&&(c("formSubmitted",{title_uz:o.category.title_uz,title_ru:o.category.title_ru,title_en:o.category.title_en,description_uz:o.category.description_uz,description_ru:o.category.description_ru,description_en:o.category.description_en,content_uz:o.category.content_uz,content_ru:o.category.content_ru,content_en:o.category.content_en,parent_id:o.category.parent_id,status:o.category.status,order:o.category.order}),c("update:isUpdateFormOpened",!1),R(()=>{n()}))})},x=C=>{c("update:isUpdateFormOpened",C)};return(C,s)=>{const g=Z;return T(),G(ae,{permanent:"",width:1e3,location:"end",class:"scrollable-content","model-value":o.isUpdateFormOpened,"onUpdate:modelValue":x},{default:t(()=>[I("div",Fe,[Oe,e(ee),e(b,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:z},{default:t(()=>[e(S,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(K),{options:{wheelPropagation:!1}},{default:t(()=>[e(W,{flat:""},{default:t(()=>[e(X,null,{default:t(()=>[e(te,{ref_key:"refCategoryCreateForm",ref:i,modelValue:a(r),"onUpdate:modelValue":s[12]||(s[12]=l=>P(r)?r.value=l:null),onSubmit:Y(O,["prevent"])},{default:t(()=>[e(v,null,{default:t(()=>[e(d,{cols:"4"},{default:t(()=>[e(U,{modelValue:o.category.title_uz,"onUpdate:modelValue":s[0]||(s[0]=l=>o.category.title_uz=l),rules:[a(y)],label:"Title Uz"},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"4"},{default:t(()=>[e(U,{modelValue:o.category.title_ru,"onUpdate:modelValue":s[1]||(s[1]=l=>o.category.title_ru=l),rules:[a(y)],label:"Title Ru"},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"4"},{default:t(()=>[e(U,{modelValue:o.category.title_en,"onUpdate:modelValue":s[2]||(s[2]=l=>o.category.title_en=l),rules:[a(y)],label:"Title En"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(d,{cols:"4"},{default:t(()=>[e(k,{modelValue:o.category.description_uz,"onUpdate:modelValue":s[3]||(s[3]=l=>o.category.description_uz=l),rules:[a(y)],label:"Description Uz"},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"4"},{default:t(()=>[e(k,{modelValue:o.category.description_ru,"onUpdate:modelValue":s[4]||(s[4]=l=>o.category.description_ru=l),rules:[a(y)],label:"Description Ru"},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"4"},{default:t(()=>[e(k,{modelValue:o.category.description_en,"onUpdate:modelValue":s[5]||(s[5]=l=>o.category.description_en=l),rules:[a(y)],label:"Description En"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(g,{label:"Content uz",modelValue:o.category.content_uz,"onUpdate:modelValue":s[6]||(s[6]=l=>o.category.content_uz=l)},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(g,{label:"Content Ru",modelValue:o.category.content_ru,"onUpdate:modelValue":s[7]||(s[7]=l=>o.category.content_ru=l)},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(g,{label:"Content En",modelValue:o.category.content_en,"onUpdate:modelValue":s[8]||(s[8]=l=>o.category.content_en=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{class:"mt-4"},{default:t(()=>[e(d,{cols:"6",md:"4"},{default:t(()=>[e(le,{modelValue:o.category.status,"onUpdate:modelValue":s[9]||(s[9]=l=>o.category.status=l),label:"Status",value:1,color:"primary"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"4"},{default:t(()=>[e(U,{modelValue:o.category.order,"onUpdate:modelValue":s[10]||(s[10]=l=>o.category.order=l),rules:[a(y)],label:"Order"},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"6",md:"4"},{default:t(()=>[e(oe,{modelValue:o.category.parent_id,"onUpdate:modelValue":s[11]||(s[11]=l=>o.category.parent_id=l),items:m.categoryGroupOptions,"item-title":"title","item-value":"id",label:"Parent",disabled:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(b,{type:"submit",class:"me-3",color:"success"},{default:t(()=>[F(" Submit ")]),_:1}),e(b,{type:"reset",variant:"tonal",color:"error",onClick:z},{default:t(()=>[F(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},lt={__name:"children",setup(m){const{categories:c,category:o,loading:r,error:i,pagination:z}=q(Q()),{fetchCategories:n,addCategory:O,fetchCategory:x,updateCategory:C,deleteCategory:s}=Q(),{fetchCategoryGroups:g}=M();q(M());const l=Ce(),w={title:"Categories",headers:["id","title_uz","title_ru","title_en","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},u=V(!1),E=V(!1),$=V(!1),B=V(null),ne=H(),A=V([{id:null,title:null}]),D=V({filter:{parent_id:ne.params.category}});n(D.value);const re=()=>{n(D.value)},se=()=>{s(B.value).then(p=>{$.value=!1,n(D.value)})},ue=p=>{$.value=!0,B.value=p},ie=p=>{u.value=p.isCreateFormOpened},de=p=>{x(p.categoryId).then(f=>{E.value=p.isUpdateFormOpened})},me=p=>{O(p).then(f=>{n(D.value)})},ce=p=>{C(children.value.id,p).then(f=>{n(D.value)})},pe=p=>{l.push({path:`/assessment/category/${p}/scenario/list`})},_e=p=>{l.push({path:`/assessment/category/${p}/questions/list`})};return J(()=>{g().then(p=>{p.data.result.data.forEach(f=>{let _={id:f.id,title:f.title_uz};A.value.push(_)})})}),(p,f)=>(T(),ye("section",null,[e(be,{onPageChanged:re,body:{data:a(c).data,pagination:a(z)},loading:a(r),tableData:w},{pageActions:t(()=>[e(v,null,{default:t(()=>[e(d,{cols:"2",offset:"md-10"},{default:t(()=>[e(b,{"prepend-icon":"tabler-plus",onClick:f[0]||(f[0]=_=>ie({isCreateFormOpened:!0}))},{default:t(()=>[F(" Create ")]),_:1})]),_:1})]),_:1})]),status:t(_=>[_.item.status===1?(T(),G(j,{key:0,color:"success"},{default:t(()=>[F(" Active ")]),_:1})):_.item.status===0?(T(),G(j,{key:1,color:"error"},{default:t(()=>[F(" Inactive ")]),_:1})):Ve("",!0)]),actions:t(_=>[e(b,{onClick:N=>de({isUpdateFormOpened:!0,categoryId:_.item.id}),icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(S,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(b,{icon:"",onClick:N=>ue(_.item.id),size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(S,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(b,{icon:"",onClick:N=>pe(_.item.id),size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(S,{size:"22",icon:"mdi-alphabetical-variant"})]),_:2},1032,["onClick"]),e(b,{icon:"",onClick:N=>_e(_.item.id),size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(S,{size:"22",icon:"mdi-lightbulb-question"})]),_:2},1032,["onClick"])]),_:1},8,["body","loading"]),e(he,{onFormSubmitted:me,isCreateFormOpened:a(u),"onUpdate:isCreateFormOpened":f[1]||(f[1]=_=>P(u)?u.value=_:null),categoryGroupOptions:a(A)},null,8,["isCreateFormOpened","categoryGroupOptions"]),e(xe,{onFormSubmitted:ce,category:a(o),categoryGroupOptions:a(A),isUpdateFormOpened:a(E),"onUpdate:isUpdateFormOpened":f[2]||(f[2]=_=>P(E)?E.value=_:null)},null,8,["category","categoryGroupOptions","isUpdateFormOpened"]),e(ve,{isOpen:a($),"onUpdate:isOpen":f[3]||(f[3]=_=>P($)?$.value=_:null),loading:a(r),onAccepted:se},null,8,["isOpen","loading"])]))}};export{lt as default};
