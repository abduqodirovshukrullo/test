import{bb as j,bc as _,k as u,o as v,c as G,p,w as m,z as h,x as S,b as x,a$ as H,A as J,q as i,b7 as b}from"./index.ccf75e8b.js";import{_ as K}from"./DataTable.632e8001.js";import{a as f}from"./axios.6988005b.js";import{u as U,a as z}from"./cities.e0315323.js";import{_ as L,a as M}from"./FormUpdate.d07b0d40.js";import{_ as W}from"./Confirmer.3f389e76.js";import{V}from"./VChip.6d62dc6b.js";import{V as X}from"./VBtn.51511430.js";import"./VRow.126a71fb.js";import"./VDivider.82c53423.js";import"./VSelect.2279726f.js";import"./VTextField.3149a27e.js";import"./index.d79d6c26.js";import"./VInput.eb4ac968.js";import"./form.66042bc2.js";import"./VList.195d91c9.js";import"./dialog-transition.bc738bac.js";import"./VMenu.55dc8cad.js";import"./VCheckboxBtn.36b303b3.js";import"./VSelectionControl.506d58f9.js";import"./validators.03da0656.js";import"./VSpacer.3dae3a1a.js";import"./VForm.39e46bcf.js";import"./VSwitch.655f8d6f.js";import"./VNavigationDrawer.cd147b40.js";import"./ssrBoot.9c630877.js";import"./coreInspectionInfos.28e53fe3.js";import"./VDialog.8e32b53e.js";const w=j("UserCompanyStore",{state:()=>({pagination:{meta:{}},filter:{},coreCompanies:[],coreCompany:{id:null,tin:"",type:"",region_id:null,region_name:"",city_id:null,city_name:"",lat:"",long:"",order:null,status:null,info:{}},loading:!1,error:""}),actions:{fetchCoreCompanies(t){return this.loading=!0,t.getAll?t={...t}:t={...{page:this.pagination.meta.current_page,per_page:this.pagination.meta.per_page},...t},new Promise((a,n)=>{f.get("/dashboard/user/company",{params:t}).then(e=>{this.coreCompanies=e.data.result,t.getAll||(this.pagination.meta=e.data.result.meta),a(e)}).catch(e=>{this.error=e,n(e)}).finally(()=>{this.loading=!1})})},fetchCoreCompany(t){return new Promise((a,n)=>{f.get(`/dashboard/core/company/${t}`).then(e=>{this.coreCompany=e.data.result,a(e.data.result)}).catch(e=>{this.error=e,n(e)}).finally(()=>{this.loading=!1})})},addCoreCompany(t){return this.loading=!0,new Promise((a,n)=>{f.post("/dashboard/core/company",t).then(e=>a(e)).catch(e=>{this.error=e,n(e)}).finally(()=>{this.loading=!1})})},updateCoreCompany(t,a){return this.loading=!0,new Promise((n,e)=>{f.put("/dashboard/core/company/"+t,a).then(c=>n(c)).catch(c=>{this.error=c,e(c)}).finally(()=>{this.loading=!1})})},deleteCoreCompany(t){return this.loading=!0,new Promise((a,n)=>{f.delete("/dashboard/core/company/"+t).then(e=>a(e)).catch(e=>{this.error=e,n(e)}).finally(()=>{this.loading=!1})})}}}),Ue={__name:"list",setup(t){const{coreCompanies:a,coreCompany:n,loading:e,error:c,pagination:R}=_(w()),{fetchCoreCompanies:d,addCoreCompany:k,fetchCoreCompany:Y,updateCoreCompany:A,deleteCoreCompany:P}=w(),{regions:F}=_(U()),{fetchRegions:$}=U(),{cities:O}=_(z()),{fetchCities:B}=z(),D={title:"Core Inspection Infos",headers:["id","name_uz","region_name","city_name","phone","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},C=u(!1),y=u(!1),g=u(!1),N=u(null),r=u({filter:{}});d(r.value),$();const T=()=>{d(r.value)},q=()=>{P(N.value).then(l=>{g.value=!1,d(r.value)})},E=l=>{k(l).then(s=>{d(r.value)})},Q=l=>{A(n.value.id,l).then(s=>{d(r.value)})},I=l=>{r.value.filter.region_soato_id=l,B(r.value)};return(l,s)=>(v(),G("section",null,[p(K,{onPageChanged:T,body:{data:i(a).data,pagination:i(R)},loading:i(e),tableData:D},{name_uz:m(o=>[h(S(o.item.info.name_uz),1)]),phone:m(o=>[h(S(o.item.info.phone),1)]),status:m(o=>[o.item.status===1?(v(),x(V,{key:0,color:"success"},{default:m(()=>[h(" Active ")]),_:1})):o.item.info.status===0?(v(),x(V,{key:1,color:"error"},{default:m(()=>[h(" Inactive ")]),_:1})):H("",!0)]),actions:m(o=>[p(X,{icon:"",to:{name:"user-company-assessment-list",params:{assessment:o.item.id}},size:"x-small",color:"default",variant:"text"},{default:m(()=>[p(J,{size:"22",icon:"mdi-open-in-app"})]),_:2},1032,["to"])]),_:1},8,["body","loading"]),p(L,{onFormSubmitted:E,onChangeRegion:I,regions:i(F),cities:i(O),isCreateFormOpened:i(C),"onUpdate:isCreateFormOpened":s[0]||(s[0]=o=>b(C)?C.value=o:null)},null,8,["regions","cities","isCreateFormOpened"]),p(M,{onFormSubmitted:Q,coreInfo:i(n),onChangeRegion:I,regions:i(F),cities:i(O),isUpdateFormOpened:i(y),"onUpdate:isUpdateFormOpened":s[1]||(s[1]=o=>b(y)?y.value=o:null)},null,8,["coreInfo","regions","cities","isUpdateFormOpened"]),p(W,{isOpen:i(g),"onUpdate:isOpen":s[2]||(s[2]=o=>b(g)?g.value=o:null),loading:i(e),onAccepted:q},null,8,["isOpen","loading"])]))}};export{Ue as default};
