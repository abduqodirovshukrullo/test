import{bb as $,o as I,c as k,p as t,w as e,m as o,A as P,q as p,b4 as B,b1 as T,bh as A,z as m,x as h,bj as U,aP as R,bc as F,k as D,b as S,a$ as j,b7 as q}from"./index.68ab1696.js";import{_ as M}from"./DataTable.529efa2b.js";import{a as b}from"./axios.3a2e37fd.js";import{V as E}from"./VSpacer.b67c60b4.js";import{V as v}from"./VBtn.e44a7ff0.js";import{V as Q,a as u,b as f}from"./VList.b0e7618d.js";import{V as G}from"./VSwitch.66e25904.js";import{V as H}from"./VDivider.db684b17.js";import{V as J}from"./VForm.12cad806.js";import{V as K,a as W}from"./VRow.b4ec55e0.js";import{V as X}from"./VNavigationDrawer.d21b7d26.js";import{V as O}from"./VChip.685dc12f.js";import"./index.58b926c8.js";import"./VSelectionControl.703dbd90.js";import"./VInput.373f1fc9.js";import"./form.2a7f55dd.js";import"./ssrBoot.786f9135.js";const y=$("ClientRateInspectorStore",{state:()=>({pagination:{meta:{}},filter:{},rateInspectors:[],rateInspector:{user_id:"",inspector_id:"",comment_text:"",rate:"",status:1,order:null},loading:!1,error:""}),actions:{fetchRateInspectors(l){return this.loading=!0,l={...{page:this.pagination.meta.current_page,per_page:this.pagination.meta.per_page},...l},new Promise((s,a)=>{b.get("/dashboard/client/rate-inspector",{params:l}).then(i=>{this.rateInspectors=i.data.result,this.pagination.meta=i.data.result.meta,s(i)}).catch(i=>{this.error=i,a(i)}).finally(()=>{this.loading=!1})})},fetchRateInspector(l){return new Promise((n,s)=>{b.get(`/dashboard/client/rate-inspector/${l}`).then(a=>{this.rateInspector=a.data.result,n(a.data.result)}).catch(a=>{this.error=a,s(a)}).finally(()=>{this.loading=!1})})},addRateInspector(l){return this.loading=!0,new Promise((n,s)=>{b.post("/dashboard/client/rate-inspector",l).then(a=>n(a)).catch(a=>{this.error=a,s(a)}).finally(()=>{this.loading=!1})})},updateRateInspector(l,n){return this.loading=!0,new Promise((s,a)=>{b.put("/dashboard/client/rate-inspector/"+l,n).then(i=>s(i)).catch(i=>{this.error=i,a(i)}).finally(()=>{this.loading=!1})})},deleteRateInspector(l){return this.loading=!0,new Promise((n,s)=>{b.delete("/dashboard/client/rate-inspector/"+l).then(a=>n(a)).catch(a=>{this.error=a,s(a)}).finally(()=>{this.loading=!1})})}}}),Y={class:"d-flex align-center pa-6 pb-1"},Z=o("h6",{class:"text-h6"}," Info details ",-1),tt={class:"text-base font-weight-semibold"},et={class:"text-body-2"},at={class:"text-base font-weight-semibold"},st={class:"text-body-2"},ot=o("h6",{class:"text-base font-weight-semibold"}," Inspector name: ",-1),nt={class:"text-body-2"},lt=o("h6",{class:"text-base font-weight-semibold"}," Comment: ",-1),it={class:"text-body-2"},rt=o("h6",{class:"text-base font-weight-semibold"}," Rate: ",-1),dt={class:"text-body-2"},ct={class:"text-base font-weight-semibold"},ut={class:"text-body-2"},ft={__name:"RateInfo",props:{isInfoDrawerOpened:{default:null,required:!0},infoDetails:{type:Object}},emits:["update:isInfoDrawerOpened","fetchList","formSubmitted"],setup(l,{emit:n}){const s=l,{updateRateInspector:a}=y(),i=()=>{n("update:isInfoDrawerOpened",!1),R(()=>{})},V=()=>{let r={status:s.infoDetails.status};a(s.infoDetails.id,r).then(c=>{c.data.success&&(n("update:isInfoDrawerOpened",!1),n("fetchList"),R(()=>{}))})},_=r=>{n("update:isInfoDrawerOpened",r)};return(r,c)=>(I(),k("div",null,[t(X,{permanent:"",width:700,location:"end",class:"scrollable-content","model-value":s.isInfoDrawerOpened,"onUpdate:modelValue":_},{default:e(()=>[o("div",Y,[Z,t(E),t(v,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:i},{default:e(()=>[t(P,{size:"18",icon:"tabler-x"})]),_:1})]),t(p(B),{options:{wheelPropagation:!1}},{default:e(()=>[t(T,{flat:""},{default:e(()=>[t(A,null,{default:e(()=>[t(Q,null,{default:e(()=>[t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[o("h6",tt,[m(" id: "),o("span",et,h(s.infoDetails.id),1)])]),_:1})]),_:1}),t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[o("h6",at,[m(" Full name: "),o("span",st,h(s.infoDetails.author_full_name),1)])]),_:1})]),_:1}),t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[ot]),_:1}),o("p",null,[o("span",nt,h(s.infoDetails.inspector_name),1)])]),_:1}),t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[lt]),_:1}),o("p",null,[o("span",it,h(s.infoDetails.comment_text),1)])]),_:1}),t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[rt]),_:1}),o("p",null,[o("span",dt,h(s.infoDetails.rate),1)])]),_:1}),t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[o("h6",ct,[m(" Status: "),o("span",ut,[t(G,{modelValue:s.infoDetails.status,"onUpdate:modelValue":c[0]||(c[0]=w=>s.infoDetails.status=w),label:"Status",value:!0,color:"primary"},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),t(H),t(J,{class:"mt-4",onSubmit:U(V,["prevent"])},{default:e(()=>[t(K,null,{default:e(()=>[t(W,{cols:"12",class:"d-flex gap-4"},{default:e(()=>[t(v,{type:"submit"},{default:e(()=>[m(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])]))}},Pt={__name:"list",setup(l){const{rateInspectors:n,rateInspector:s,loading:a,error:i,pagination:V}=F(y()),{fetchRateInspectors:_}=y(),r=D(!1),c=D({}),w={title:"Appeal Rate Inspector",headers:["id","inspector_name","comment_text","rate","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},x=D({filter:{parent_id:null}});_(x.value);const z=()=>{_(x.value)},L=()=>{_(x.value)},N=C=>{const g=n.value.data.filter(d=>d.id===C);c.value=g[0],r.value=!0};return(C,g)=>(I(),k("section",null,[t(M,{onPageChanged:L,body:{data:p(n).data,pagination:p(V)},loading:p(a),tableData:w},{status:e(d=>[d.item.status===!0?(I(),S(O,{key:0,color:"success"},{default:e(()=>[m(" Active ")]),_:1})):d.item.status===!1?(I(),S(O,{key:1,color:"error"},{default:e(()=>[m(" Inactive ")]),_:1})):j("",!0)]),actions:e(d=>[t(v,{icon:"",onClick:pt=>N(d.item.id),size:"x-small",color:"default",variant:"text"},{default:e(()=>[t(P,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])]),_:1},8,["body","loading"]),t(ft,{onFetchList:z,infoDetails:p(c),isInfoDrawerOpened:p(r),"onUpdate:isInfoDrawerOpened":g[0]||(g[0]=d=>q(r)?r.value=d:null)},null,8,["infoDetails","isInfoDrawerOpened"])]))}};export{Pt as default};
