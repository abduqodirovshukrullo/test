import{bc as y,k as D,D as T,o as I,c as R,p as e,w as t,m as o,A as q,q as i,b4 as Q,b1 as G,bh as H,z as m,x as p,bj as J,b7 as O,b as z,a$ as M,aP as B,bs as $}from"./main.28eac655.js";import{_ as K}from"./DataTable.c4077183.js";import{u as F}from"./coreInspectorInfos.a11e4243.js";import{u as U}from"./sendedDocumentStore.ab20c810.js";import{u as j}from"./systemUserStore.b7589e6f.js";import{V as W}from"./VSpacer.24baf8c8.js";import{V as v}from"./VBtn.c12fdd64.js";import{V as X,a as _,b}from"./VList.2e46a22e.js";import{V as Y}from"./VDivider.4e5147ee.js";import{V as Z}from"./VForm.faab6af8.js";import{V as ee,a as k}from"./VRow.f25df8b8.js";import{V as A}from"./VSelect.e2438bf0.js";import{V as te}from"./VNavigationDrawer.e49588b6.js";import{u as L}from"./coreInspectionInfos.44c150b6.js";import{u as oe}from"./clientEnrolStore.8154d445.js";import{V as P}from"./VChip.15e3c72f.js";import"./axios.8204d459.js";import"./index.0b83b8d8.js";import"./form.b198e9eb.js";import"./VTextField.b8935754.js";import"./VInput.a1b5a69b.js";import"./dialog-transition.fc2767b3.js";import"./VMenu.cc85e129.js";import"./VCheckboxBtn.f5856159.js";import"./VSelectionControl.08ac7448.js";import"./ssrBoot.06a3cbcc.js";const se={class:"d-flex align-center pa-6 pb-1"},ae=o("h6",{class:"text-h6"}," Info details ",-1),ne={class:"text-base font-weight-semibold"},le={class:"text-body-2"},ie={class:"text-base font-weight-semibold"},re={class:"text-body-2"},ue=o("h6",{class:"text-base font-weight-semibold"}," Text: ",-1),ce={class:"text-body-2"},de=o("h6",{class:"text-base font-weight-semibold"}," Inspection name: ",-1),me={class:"text-base font-weight-semibold"},pe={class:"text-base font-weight-semibold"},fe={class:"text-body-2"},_e={__name:"DocumentInfo",props:{isInfoDrawerOpened:{default:null,required:!0},documentDetails:{type:Object},coreInspections:{type:Object}},emits:["update:isInfoDrawerOpened","fetchEnrols","formSubmitted"],setup(E,{emit:d}){const s=E;F();const{updateSendedDocument:N}=U(),{coreInfos:S}=y(F()),{fetchUsers:h}=j(),{users:w}=y(j()),r=D(s.documentDetails.inspection_id),u=D(null),V=()=>{d("update:isInfoDrawerOpened",!1),B(()=>{g()})},f=()=>{let a={inspection_id:r.value,inspector_id:u.value};N(s.documentDetails.id,a).then(n=>{n.data.success&&(d("update:isInfoDrawerOpened",!1),d("fetchEnrols"),B(()=>{g()}))})},x=a=>{d("update:isInfoDrawerOpened",a)},g=()=>{r.value=null,u.value=null,S.value=[]},C=()=>{let a={filter:{inspection_id:r.value}};return h(a)};return T(r,async(a,n)=>{u.value=null,C()}),T(()=>s.documentDetails,(a,n)=>{r.value=a.inspection_id}),(a,n)=>(I(),R("div",null,[e(te,{permanent:"",width:500,location:"end",class:"scrollable-content","model-value":s.isInfoDrawerOpened,"onUpdate:modelValue":x},{default:t(()=>[o("div",se,[ae,e(W),e(v,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:V},{default:t(()=>[e(q,{size:"18",icon:"tabler-x"})]),_:1})]),e(i(Q),{options:{wheelPropagation:!1}},{default:t(()=>[e(G,{flat:""},{default:t(()=>[e(H,null,{default:t(()=>[e(X,null,{default:t(()=>[e(_,null,{default:t(()=>[e(b,null,{default:t(()=>[o("h6",ne,[m(" id: "),o("span",le,p(s.documentDetails.id),1)])]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(b,null,{default:t(()=>[o("h6",ie,[m(" Full name: "),o("span",re,p(s.documentDetails.full_name),1)])]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(b,null,{default:t(()=>[ue]),_:1}),o("p",null,[o("span",ce,p(s.documentDetails.comment_text),1)])]),_:1}),e(_,null,{default:t(()=>[e(b,null,{default:t(()=>[de]),_:1}),o("p",null,p(s.documentDetails.inspection_name),1)]),_:1}),e(_,null,{default:t(()=>[e(b,null,{default:t(()=>[o("h6",me,[m(" Document: "),o("span",null,[e(v,{icon:"tabler-download",size:"small"})])])]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(b,null,{default:t(()=>[o("h6",pe,[m(" Status: "),o("span",fe,p(s.documentDetails.status),1)])]),_:1})]),_:1})]),_:1}),e(Y),e(Z,{class:"mt-4",onSubmit:J(f,["prevent"])},{default:t(()=>[e(ee,null,{default:t(()=>[e(k,{cols:"12"},{default:t(()=>[e(A,{items:s.coreInspections.data,modelValue:i(r),"onUpdate:modelValue":n[0]||(n[0]=c=>O(r)?r.value=c:null),"item-title":"info.name_uz","item-value":"id",label:"Inspection",density:"compact"},null,8,["items","modelValue"])]),_:1}),e(k,{cols:"12"},{default:t(()=>[i(w).data?(I(),z(A,{key:0,items:i(w).data,modelValue:i(u),"onUpdate:modelValue":n[1]||(n[1]=c=>O(u)?u.value=c:null),"item-title":"username","item-value":"id",label:"Inspectors",density:"compact"},null,8,["items","modelValue"])):M("",!0)]),_:1}),e(k,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(v,{type:"submit"},{default:t(()=>[m(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])]))}},be={__name:"list",setup(E){const{documents:d,loading:s,error:N,pagination:S}=y(U()),{fetchSendedDocuments:h}=U(),{fetchCoreInsInfos:w}=L();oe();const{coreInsInfos:r}=y(L()),u={title:"Sended Documents",headers:["id","comment_text","document_url","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},V=D({filter:{parent_id:null}}),f=D(!1),x=D({});h(V.value),w({getAll:!0});const g=()=>{h(V.value)},C=()=>{h(V.value)},a=n=>{const c=d.value.data.filter(l=>l.id===n);x.value=c[0],f.value=!0};return(n,c)=>(I(),R("section",null,[e(K,{onPageChanged:g,body:{data:i(d).data,pagination:i(S)},loading:i(s),tableData:u},{status:t(l=>[l.item.status==="new"?(I(),z(P,{key:0,color:"primary"},{default:t(()=>[m(p(l.item.status),1)]),_:2},1024)):l.item.status==="processing"?(I(),z(P,{key:1,color:"warning"},{default:t(()=>[m(p(l.item.status),1)]),_:2},1024)):M("",!0)]),document_url:t(l=>[e(v,{variant:"tonal",icon:"tabler-download",color:"success",size:"small"})]),actions:t(l=>[e(v,{icon:"",size:"x-small",color:"default",variant:"text",onClick:he=>a(l.item.id)},{default:t(()=>[e(q,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])]),_:1},8,["body","loading"]),e(_e,{onFetchEnrols:C,documentDetails:i(x),coreInspections:i(r),isInfoDrawerOpened:i(f),"onUpdate:isInfoDrawerOpened":c[0]||(c[0]=l=>O(f)?f.value=l:null)},null,8,["documentDetails","coreInspections","isInfoDrawerOpened"])]))}};typeof $=="function"&&$(be);export{be as default};
