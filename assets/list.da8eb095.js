import{bb as B,o as g,c as z,p as t,w as e,m as n,A as C,q as f,b4 as U,b1 as A,bh as L,z as d,x as V,bj as R,aP as k,bc as j,k as y,b as T,a$ as O,b7 as q}from"./index.ccf75e8b.js";import{_ as M}from"./DataTable.632e8001.js";import{a as h}from"./axios.6988005b.js";import{V as E}from"./VSpacer.3dae3a1a.js";import{V as x}from"./VBtn.51511430.js";import{V as Q,a as _,b}from"./VList.195d91c9.js";import{V as G}from"./VSwitch.655f8d6f.js";import{V as H}from"./VDivider.82c53423.js";import{V as J}from"./VForm.39e46bcf.js";import{V as K,a as W}from"./VRow.126a71fb.js";import{V as X}from"./VNavigationDrawer.cd147b40.js";import{V as I}from"./VChip.6d62dc6b.js";import"./index.d79d6c26.js";import"./VSelectionControl.506d58f9.js";import"./VInput.eb4ac968.js";import"./form.66042bc2.js";import"./ssrBoot.9c630877.js";const F=B("ClientForum",{state:()=>({pagination:{meta:{}},filter:{},forumTopics:[],forumTopic:{full_name:"",title:"",content:"",status:""},loading:!1,error:""}),actions:{fetchForumTopics(l){return this.loading=!0,l={...{page:this.pagination.meta.current_page,per_page:this.pagination.meta.per_page},...l},new Promise((o,a)=>{h.get("dashboard/client/forum",{params:l}).then(i=>{this.forumTopics=i.data.result,this.pagination.meta=i.data.result.meta,o(i)}).catch(i=>{this.error=i,a(i)}).finally(()=>{this.loading=!1})})},fetchForumTopic(l){return new Promise((s,o)=>{h.get(`dashboard/client/forum/${l}`).then(a=>{this.appealApplication=a.data.result,s(a.data.result)}).catch(a=>{this.error=a,o(a)}).finally(()=>{this.loading=!1})})},addForumTopic(l){return this.loading=!0,new Promise((s,o)=>{h.post("dashboard/client/application",l,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>s(a)).catch(a=>{this.error=a,o(a)}).finally(()=>{this.loading=!1})})},updateForumTopic(l,s){return this.loading=!0,new Promise((o,a)=>{h.post("dashboard/client/forum/"+l+"?_method=PUT",s,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>o(i)).catch(i=>{this.error=i,a(i)}).finally(()=>{this.loading=!1})})},deleteForumTopic(l){return this.loading=!0,new Promise((s,o)=>{h.delete("dashboard/client/forum/"+l).then(a=>s(a)).catch(a=>{this.error=a,o(a)}).finally(()=>{this.loading=!1})})}}}),Y={class:"d-flex align-center pa-6 pb-1"},Z=n("h6",{class:"text-h6"}," Info details ",-1),tt={class:"text-base font-weight-semibold"},et={class:"text-body-2"},at={class:"text-base font-weight-semibold"},ot={class:"text-body-2"},st={class:"text-base font-weight-semibold"},lt={class:"text-body-2"},it=n("h6",{class:"text-base font-weight-semibold"}," Content: ",-1),nt={class:"text-body-2"},rt={class:"text-base font-weight-semibold"},ut={class:"text-body-2"},dt={__name:"ForumInfo",props:{isInfoDrawerOpened:{default:null,required:!0},forumDetails:{type:Object}},emits:["update:isInfoDrawerOpened","fetchTopics","formSubmitted"],setup(l,{emit:s}){const o=l,{updateForumTopic:a}=F(),i=()=>{s("update:isInfoDrawerOpened",!1),k(()=>{w()})},w=()=>{status.value=null},m=()=>{let u={status:o.forumDetails.status};a(o.forumDetails.id,u).then(c=>{c.data.success&&(s("update:isInfoDrawerOpened",!1),s("fetchTopics"),k(()=>{w()}))})},v=u=>{s("update:isInfoDrawerOpened",u)};return(u,c)=>(g(),z("div",null,[t(X,{permanent:"",width:700,location:"end",class:"scrollable-content","model-value":o.isInfoDrawerOpened,"onUpdate:modelValue":v},{default:e(()=>[n("div",Y,[Z,t(E),t(x,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:i},{default:e(()=>[t(C,{size:"18",icon:"tabler-x"})]),_:1})]),t(f(U),{options:{wheelPropagation:!1}},{default:e(()=>[t(A,{flat:""},{default:e(()=>[t(L,null,{default:e(()=>[t(Q,null,{default:e(()=>[t(_,null,{default:e(()=>[t(b,null,{default:e(()=>[n("h6",tt,[d(" id: "),n("span",et,V(o.forumDetails.id),1)])]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(b,null,{default:e(()=>[n("h6",at,[d(" Full name: "),n("span",ot,V(o.forumDetails.full_name),1)])]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(b,null,{default:e(()=>[n("h6",st,[d(" Title: "),n("span",lt,V(o.forumDetails.title),1)])]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(b,null,{default:e(()=>[it]),_:1}),n("p",null,[n("span",nt,V(o.forumDetails.content),1)])]),_:1}),t(_,null,{default:e(()=>[t(b,null,{default:e(()=>[n("h6",rt,[d(" Status: "),n("span",ut,[t(G,{modelValue:o.forumDetails.status,"onUpdate:modelValue":c[0]||(c[0]=p=>o.forumDetails.status=p),label:"Status",value:1,color:"primary"},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),t(H),t(J,{class:"mt-4",onSubmit:R(m,["prevent"])},{default:e(()=>[t(K,null,{default:e(()=>[t(W,{cols:"12",class:"d-flex gap-4"},{default:e(()=>[t(x,{type:"submit"},{default:e(()=>[d(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])]))}},St={__name:"list",setup(l){const{forumTopics:s,forumTopic:o,loading:a,error:i,pagination:w}=j(F()),{fetchForumTopics:m}=F(),v={title:"Client Forum Topics",headers:["full_name","title","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},u=y(!1),c=y({}),p=y({filter:{}});m(p.value);const P=()=>{m(p.value)},N=()=>{m(p.value)},$=S=>{const D=s.value.data.filter(r=>r.id===S);c.value=D[0],u.value=!0};return(S,D)=>(g(),z("section",null,[t(M,{onPageChanged:N,body:{data:f(s).data,pagination:f(w)},loading:f(a),tableData:v},{type:e(r=>[r.item.type?(g(),T(I,{key:0,color:"success"},{default:e(()=>[d(V(r.item.type),1)]),_:2},1024)):O("",!0)]),status:e(r=>[r.item.status===1?(g(),T(I,{key:0,color:"success"},{default:e(()=>[d(" Active ")]),_:1})):r.item.status===0?(g(),T(I,{key:1,color:"error"},{default:e(()=>[d(" Inactive ")]),_:1})):O("",!0)]),actions:e(r=>[t(x,{icon:"",onClick:ct=>$(r.item.id),size:"x-small",color:"default",variant:"text"},{default:e(()=>[t(C,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(x,{icon:"",to:{name:"client-forum-forum-comments",params:{forum:r.item.id}},size:"x-small",color:"default",variant:"text"},{default:e(()=>[t(C,{size:"22",icon:"mdi-open-in-app"})]),_:2},1032,["to"])]),_:1},8,["body","loading"]),t(dt,{onFetchTopics:P,forumDetails:f(c),isInfoDrawerOpened:f(u),"onUpdate:isInfoDrawerOpened":D[0]||(D[0]=r=>q(u)?u.value=r:null)},null,8,["forumDetails","isInfoDrawerOpened"])]))}};export{St as default};
