import{k as d,aE as re,o as x,b as T,w as l,m as N,p as e,A as $,q as o,b4 as M,b1 as E,bh as Q,b7 as U,bj as G,z as F,aP as A,bc as R,c as ue,a$ as se}from"./index.ff6dd18a.js";import{_ as de}from"./DataTable.8386c370.js";import{u as B}from"./libCategoryItem.ee6019dd.js";import{u as q}from"./libCategory.a99b8c58.js";import{r as g}from"./validators.03da0656.js";import{V as H}from"./VSpacer.9cd97db6.js";import{V as v}from"./VBtn.05c82630.js";import{V as J}from"./VForm.5de4a92d.js";import{V as y,a as s}from"./VRow.6a3eb9e0.js";import{V as C}from"./VTextField.afb07e72.js";import{V as K}from"./VSelect.cdb6d5f2.js";import{V as W}from"./VFileInput.12fbd56d.js";import{V as X}from"./VSwitch.37089247.js";import{V as Y}from"./VNavigationDrawer.64c65f66.js";import{_ as ne}from"./Confirmer.da69fa93.js";import{V as P}from"./VChip.34758a01.js";import"./VDivider.709f44be.js";import"./axios.544a54a6.js";import"./form.03636cd0.js";import"./index.f6fb5e9e.js";import"./VInput.31ae3301.js";import"./VList.12bf040d.js";import"./dialog-transition.2a00a3c9.js";import"./VMenu.901c1049.js";import"./VCheckboxBtn.3329c02d.js";import"./VSelectionControl.82c875c1.js";import"./ssrBoot.051a63f0.js";import"./VDialog.ab1b1692.js";const me={class:"d-flex align-center pa-6 pb-1"},pe=N("h6",{class:"text-h6"}," Add Lib Category Item ",-1),fe={__name:"FormCreate",props:{isCreateFormOpened:{default:null,required:!0},appealApplication:{default:{id:null}},libCategories:{type:Object}},emits:["update:isCreateFormOpened","formSubmitted"],setup(w,{emit:p}){const r=w,_=d(!1),V=d(null),i=re({title_uz:"",title_en:"",title_ru:"",lib_category_id:"",status:"",order:"",image_file:[]}),f=()=>{p("update:isCreateFormOpened",!1),A(()=>{I()})},I=()=>{var u,t;(u=V.value)==null||u.reset(),i.title_uz="",i.title_en="",i.title_ru="",i.lib_category_id="",i.status="",i.order="",i.image_file=[],(t=V.value)==null||t.resetValidation()},O=()=>{var u;(u=V.value)==null||u.validate().then(({valid:t})=>{if(t){let a=new FormData;for(const b in i)b==="image_file"?a.append(b,i[b][0]):a.append(b,i[b]);p("formSubmitted",a),p("update:isCreateFormOpened",!1),A(()=>{I()})}})},S=u=>{p("update:isCreateFormOpened",u)};return(u,t)=>(x(),T(Y,{permanent:"",width:1e3,location:"end",class:"scrollable-content","model-value":r.isCreateFormOpened,"onUpdate:modelValue":S},{default:l(()=>[N("div",me,[pe,e(H),e(v,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:f},{default:l(()=>[e($,{size:"18",icon:"tabler-x"})]),_:1})]),e(o(M),{options:{wheelPropagation:!1}},{default:l(()=>[e(E,{flat:""},{default:l(()=>[e(Q,null,{default:l(()=>[e(J,{ref_key:"refLibCategoryItemCreateForm",ref:V,modelValue:o(_),"onUpdate:modelValue":t[7]||(t[7]=a=>U(_)?_.value=a:null),onSubmit:G(O,["prevent"])},{default:l(()=>[e(y,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(C,{modelValue:o(i).title_uz,"onUpdate:modelValue":t[0]||(t[0]=a=>o(i).title_uz=a),rules:[o(g)],label:"Title Uz"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(C,{modelValue:o(i).title_ru,"onUpdate:modelValue":t[1]||(t[1]=a=>o(i).title_ru=a),rules:[o(g)],label:"Title Ru"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(C,{modelValue:o(i).title_en,"onUpdate:modelValue":t[2]||(t[2]=a=>o(i).title_en=a),rules:[o(g)],label:"Title Ru"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(y,{class:"mt-4"},{default:l(()=>[e(s,{cols:"6"},{default:l(()=>[e(K,{modelValue:o(i).lib_category_id,"onUpdate:modelValue":t[3]||(t[3]=a=>o(i).lib_category_id=a),items:r.libCategories.data,"item-title":"title_uz","item-value":"id",label:"Library Category Id"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(W,{label:"Image",modelValue:o(i).image_file,"onUpdate:modelValue":t[4]||(t[4]=a=>o(i).image_file=a),rules:[o(g)]},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"6",md:"6"},{default:l(()=>[e(C,{modelValue:o(i).order,"onUpdate:modelValue":t[5]||(t[5]=a=>o(i).order=a),rules:[o(g)],label:"Order",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"6",md:"6"},{default:l(()=>[e(X,{modelValue:o(i).status,"onUpdate:modelValue":t[6]||(t[6]=a=>o(i).status=a),label:"Status",value:1,color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(v,{type:"submit",class:"me-3",color:"success"},{default:l(()=>[F(" Submit ")]),_:1}),e(v,{variant:"tonal",color:"error",onClick:f},{default:l(()=>[F(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},be={class:"d-flex align-center pa-6 pb-1"},ce=N("h6",{class:"text-h6"}," Update Core Inspections Tag ",-1),_e={__name:"FormUpdate",props:{isUpdateFormOpened:{default:null,required:!0},libItem:{type:Object},libCategories:{type:Object}},emits:["update:isUpdateFormOpened","formSubmitted"],setup(w,{emit:p}){const r=w;R(B()),d([{id:null,title:null}]),d(null);const _=d(!1),V=d(null);d({filter:{parent_id:null}});const i=d([]),f=()=>{p("update:isUpdateFormOpened",!1),A(()=>{I()})},I=()=>{var u,t;(u=V.value)==null||u.reset(),r.libItem.title_uz="",r.libItem.title_en="",r.libItem.title_ru="",r.libItem.lib_category_id="",r.libItem.status="",r.libItem.order="",i.value=[],(t=V.value)==null||t.resetValidation()},O=()=>{var u;(u=V.value)==null||u.validate().then(({valid:t})=>{if(t){let a=new FormData;for(const b in r.libItem)b==="image_url"?i.value.length>0?a.append("image_file",i.value[0]):a.append("image_file",r.libItem.image_url):a.append(b,r.libItem[b]);p("formSubmitted",a),p("update:isUpdateFormOpened",!1),A(()=>{I()})}})},S=u=>{p("update:isUpdateFormOpened",u)};return(u,t)=>(x(),T(Y,{permanent:"",width:1e3,location:"end",class:"scrollable-content","model-value":r.isUpdateFormOpened,"onUpdate:modelValue":S},{default:l(()=>[N("div",be,[ce,e(H),e(v,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:f},{default:l(()=>[e($,{size:"18",icon:"tabler-x"})]),_:1})]),e(o(M),{options:{wheelPropagation:!1}},{default:l(()=>[e(E,{flat:""},{default:l(()=>[e(Q,null,{default:l(()=>[e(J,{ref_key:"refLibCategoryItemCreateForm",ref:V,modelValue:o(_),"onUpdate:modelValue":t[7]||(t[7]=a=>U(_)?_.value=a:null),onSubmit:G(O,["prevent"])},{default:l(()=>[e(y,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(C,{modelValue:r.libItem.title_uz,"onUpdate:modelValue":t[0]||(t[0]=a=>r.libItem.title_uz=a),rules:[o(g)],label:"Title Uz"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(C,{modelValue:r.libItem.title_ru,"onUpdate:modelValue":t[1]||(t[1]=a=>r.libItem.title_ru=a),rules:[o(g)],label:"Title Ru"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(C,{modelValue:r.libItem.title_en,"onUpdate:modelValue":t[2]||(t[2]=a=>r.libItem.title_en=a),rules:[o(g)],label:"Title Ru"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(y,{class:"mt-4"},{default:l(()=>[e(s,{cols:"6"},{default:l(()=>[e(K,{modelValue:r.libItem.lib_category_id,"onUpdate:modelValue":t[3]||(t[3]=a=>r.libItem.lib_category_id=a),items:r.libCategories.data,"item-value":"id","item-title":"title_uz",label:"Library Category Id"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(W,{label:"Image",modelValue:o(i),"onUpdate:modelValue":t[4]||(t[4]=a=>U(i)?i.value=a:null)},null,8,["modelValue"])]),_:1}),e(s,{cols:"6",md:"6"},{default:l(()=>[e(C,{modelValue:r.libItem.order,"onUpdate:modelValue":t[5]||(t[5]=a=>r.libItem.order=a),rules:[o(g)],label:"Order"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"6",md:"6"},{default:l(()=>[e(X,{modelValue:r.libItem.status,"onUpdate:modelValue":t[6]||(t[6]=a=>r.libItem.status=a),label:"Status",value:1,color:"primary",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(y,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(v,{type:"submit",class:"me-3",color:"success"},{default:l(()=>[F(" Submit ")]),_:1}),e(v,{variant:"tonal",color:"error",onClick:f},{default:l(()=>[F(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ge={__name:"list",setup(w){const{libItems:p,libItem:r,loading:_,error:V,pagination:i}=R(B()),{fetchLibItems:f,addLibItem:I,fetchLibItem:O,updateLibItem:S,deleteLibItem:u}=B(),{libCategories:t}=R(q()),{fetchLibCategories:a}=q(),b={title:"Library Category Item",headers:["id","title_uz","title_en","title_ru","lib_category_id","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},L=d(!1),D=d(!1),z=d(!1),j=d(null),k=d({filter:{parent_id:null}});f(k.value),a({getAll:!0});const Z=()=>{f(k.value)},h=()=>{u(j.value).then(n=>{z.value=!1,f(k.value)})},ee=n=>{z.value=!0,j.value=n},le=n=>{L.value=n.isCreateFormOpened},te=n=>{O(n.libItemId).then(c=>{D.value=n.isUpdateFormOpened})},ae=n=>{I(n).then(c=>{f(k.value)})},oe=n=>{S(r.value.id,n).then(c=>{f(k.value)})};return(n,c)=>(x(),ue("section",null,[e(de,{onPageChanged:Z,body:{data:o(p).data,pagination:o(i)},loading:o(_),tableData:b},{pageActions:l(()=>[e(y,null,{default:l(()=>[e(s,{cols:"2",offset:"md-10"},{default:l(()=>[e(v,{"prepend-icon":"tabler-plus",onClick:c[0]||(c[0]=m=>le({isCreateFormOpened:!0}))},{default:l(()=>[F(" Create ")]),_:1})]),_:1})]),_:1})]),status:l(m=>[m.item.status===1?(x(),T(P,{key:0,color:"success"},{default:l(()=>[F(" Active ")]),_:1})):m.item.status===0?(x(),T(P,{key:1,color:"error"},{default:l(()=>[F(" Inactive ")]),_:1})):se("",!0)]),actions:l(m=>[e(v,{onClick:ie=>te({isUpdateFormOpened:!0,libItemId:m.item.id}),icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[e($,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(v,{icon:"",onClick:ie=>ee(m.item.id),size:"x-small",color:"default",variant:"text"},{default:l(()=>[e($,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:1},8,["body","loading"]),e(fe,{onFormSubmitted:ae,isCreateFormOpened:o(L),"onUpdate:isCreateFormOpened":c[1]||(c[1]=m=>U(L)?L.value=m:null),libCategories:o(t)},null,8,["isCreateFormOpened","libCategories"]),e(_e,{onFormSubmitted:oe,libItem:o(r),isUpdateFormOpened:o(D),"onUpdate:isUpdateFormOpened":c[2]||(c[2]=m=>U(D)?D.value=m:null),libCategories:o(t)},null,8,["libItem","isUpdateFormOpened","libCategories"]),e(ne,{isOpen:o(z),"onUpdate:isOpen":c[3]||(c[3]=m=>U(z)?z.value=m:null),loading:o(_),onAccepted:h},null,8,["isOpen","loading"])]))}};export{Ge as default};
