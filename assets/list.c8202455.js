import{bb as v,bc as k,k as o,o as c,c as x,p as P,w as l,z as m,x as f,b as g,q as d,bO as q}from"./index.ccf75e8b.js";import{_ as z}from"./DataTable.632e8001.js";import{a as u}from"./axios.6988005b.js";import{V as _}from"./VChip.6d62dc6b.js";import"./VRow.126a71fb.js";import"./VDivider.82c53423.js";import"./VBtn.51511430.js";import"./index.d79d6c26.js";const y=v("UserAssessmentsStore",{state:()=>({pagination:{meta:{}},filter:{},assessments:[],assessment:{title_uz:null,title_ru:null,title_en:null,prompt_uz:null,prompt_ru:null,prompt_en:null,is_multiple:0,question_type:null,category_id:null,status:1,order:null},loading:!1,error:""}),actions:{fetchAssessment(t){return new Promise((s,a)=>{u.get(`/dashboard/assessment/sea-question-answer/${t}`).then(e=>{this.assesment=e.data.data,s(e.data.data)}).catch(e=>{this.error=e,a(e)}).finally(()=>{this.loading=!1})})},fetchAssessments(t,s){return this.loading=!0,s={...{page:this.pagination.meta.current_page,per_page:this.pagination.meta.per_page},...s},new Promise((e,i)=>{u.get("/dashboard/user/company/"+t+"/user-assessments",{params:s}).then(n=>{this.assessments=n.data.result,this.pagination.meta=n.data.result.meta,e(n)}).catch(n=>{this.error=n,i(n)}).finally(()=>{this.loading=!1})})},addAssessment(t){return this.loading=!0,new Promise((s,a)=>{u.post("/dashboard/assessment/sea-question-answer",t).then(e=>s(e)).catch(e=>{this.error=e,a(e)}).finally(()=>{this.loading=!1})})},updateAssessment(t,s){return this.loading=!0,new Promise((a,e)=>{u.put("/dashboard/assessment/sea-question-answer/"+t,s).then(i=>a(i)).catch(i=>{this.error=i,e(i)}).finally(()=>{this.loading=!1})})},deleteAssessment(t){return this.loading=!0,new Promise((s,a)=>{u.delete("/dashboard/assessment/sea-question-answer/"+t).then(e=>s(e)).catch(e=>{this.error=e,a(e)}).finally(()=>{this.loading=!1})})}}}),j={__name:"list",setup(t){const{assessments:s,assessment:a,loading:e,error:i,pagination:n}=k(y()),{fetchAssessments:h,addAssessment:C,fetchAssessment:S,updateAssessment:V,deleteAssessment:B}=y(),A={title:"Assesments",headers:["id","user","result_mark","percent","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}};o(!1),o(!1),o(!1),o(null);const p=o({filter:{}}),b=q();h(b.params.assessment,p.value);const w=()=>{h(p.value)};return(D,I)=>(c(),x("section",null,[P(z,{onPageChanged:w,body:{data:d(s).data,pagination:d(n)},loading:d(e),tableData:A},{user:l(r=>[m(f(r.item.user.name),1)]),status:l(r=>[r.item.status===1?(c(),g(_,{key:0,color:"success"},{default:l(()=>[m(" Active ")]),_:1})):(c(),g(_,{key:1,color:"error"},{default:l(()=>[m(" Inactive ")]),_:1}))]),percent:l(r=>[m(f(r.item.result_answer.percent),1)]),_:1},8,["body","loading"])]))}};export{j as default};
