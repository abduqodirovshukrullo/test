import{bb as T,bc as I,k as f,o as h,c as U,p as d,w as r,b as y,z as b,x as v,a$ as w,A as $,q as i,b7 as B}from"./main.28eac655.js";import{_ as O}from"./DataTable.c4077183.js";import{_ as N}from"./AppealEnrolInfo.89a257c5.js";import{u as C}from"./coreInspectionInfos.44c150b6.js";import{a as l}from"./axios.8204d459.js";import{V as D}from"./VChip.15e3c72f.js";import{V as R}from"./VBtn.c12fdd64.js";import"./VRow.f25df8b8.js";import"./VDivider.4e5147ee.js";import"./coreInspectorInfos.a11e4243.js";import"./clientEnrolStore.8154d445.js";import"./systemUserStore.b7589e6f.js";import"./VSpacer.24baf8c8.js";import"./VList.2e46a22e.js";import"./index.0b83b8d8.js";import"./VForm.faab6af8.js";import"./form.b198e9eb.js";import"./VNavigationDrawer.e49588b6.js";import"./ssrBoot.06a3cbcc.js";const x=T("UserEnrolStore",{state:()=>({pagination:{meta:{}},filter:{},appealInspectors:[],appealInspector:{type:"",first_name:"",last_name:"",patronimic:"",address:"",passport_serial:"",pin:"",phone:"",inspection_id:null,problem_id:null,user_text:"",document_url:null,planned_date:"",planned_time:"",user_id:null,status:1,order:""},loading:!1,error:""}),actions:{fetchAppealInspectors(t){return this.loading=!0,t={...{page:this.pagination.meta.current_page,per_page:this.pagination.meta.per_page},...t},new Promise((n,e)=>{l.get("/dashboard/user/enrol",{params:t}).then(a=>{this.appealInspectors=a.data.result,this.pagination.meta=a.data.result.meta,n(a)}).catch(a=>{this.error=a,e(a)}).finally(()=>{this.loading=!1})})},fetchAppealInspector(t){return new Promise((o,n)=>{l.get(`/dashboard/user/enrol/${t}`).then(e=>{this.appealInspector=e.data.result,o(e.data.result)}).catch(e=>{this.error=e,n(e)}).finally(()=>{this.loading=!1})})},addAppealInspector(t){return this.loading=!0,new Promise((o,n)=>{l.post("/dashboard/user/enrol",t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>o(e)).catch(e=>{this.error=e,n(e)}).finally(()=>{this.loading=!1})})},updateAppealInspector(t,o){return this.loading=!0,new Promise((n,e)=>{l.post("/dashboard/user/enrol/"+t+"?_method=PUT",o,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>n(a)).catch(a=>{this.error=a,e(a)}).finally(()=>{this.loading=!1})})},deleteAppealInspector(t){return this.loading=!0,new Promise((o,n)=>{l.delete("/dashboard/user/enrol/"+t).then(e=>o(e)).catch(e=>{this.error=e,n(e)}).finally(()=>{this.loading=!1})})}}}),re={__name:"list",setup(t){const{appealInspectors:o,appealInspector:n,loading:e,error:a,pagination:A}=I(x()),{fetchCoreInsInfos:E}=C(),{fetchAppealInspectors:u}=x(),{coreInsInfos:k}=I(C()),V={title:"User Enrol Inspector",headers:["type","first_name","phone","problem_name","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},p=f(!1),g=f({}),m=f({filter:{parent_id:null}});u(m.value),E({getAll:!0});const P=()=>{u(m.value)},z=()=>{u(m.value)},S=_=>{const c=o.value.data.filter(s=>s.id===_);g.value=c[0],p.value=!0};return(_,c)=>(h(),U("section",null,[d(O,{onPageChanged:z,body:{data:i(o).data,pagination:i(A)},loading:i(e),tableData:V},{status:r(s=>[s.item.status?(h(),y(D,{key:0,color:"success"},{default:r(()=>[b(v(s.item.status),1)]),_:2},1024)):w("",!0)]),type:r(s=>[s.item.type?(h(),y(D,{key:0,color:"success"},{default:r(()=>[b(v(s.item.type),1)]),_:2},1024)):w("",!0)]),actions:r(s=>[d(R,{icon:"",size:"x-small",color:"default",variant:"text",onClick:q=>S(s.item.id)},{default:r(()=>[d($,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])]),_:1},8,["body","loading"]),d(N,{onFetchEnrols:P,appealEnrolDetails:i(g),coreInspections:i(k),isInfoDrawerOpened:i(p),"onUpdate:isInfoDrawerOpened":c[0]||(c[0]=s=>B(p)?p.value=s:null)},null,8,["appealEnrolDetails","coreInspections","isInfoDrawerOpened"])]))}};export{re as default};
