import{bO as re,k as m,aE as se,o as z,b as T,w as t,m as A,p as e,A as I,q as a,b4 as B,b1 as j,bh as H,b7 as $,bj as G,a$ as N,z as O,aP as D,bH as J,bc as K,aF as ne,c as ie}from"./main.28eac655.js";import{_ as de}from"./DataTable.c4077183.js";import{u as E}from"./questionStore.f5db551d.js";import{r as U}from"./validators.03da0656.js";import{V as L}from"./VSpacer.24baf8c8.js";import{V as b}from"./VBtn.c12fdd64.js";import{V as W}from"./VForm.faab6af8.js";import{V,a as n}from"./VRow.f25df8b8.js";import{V as C}from"./VTextField.b8935754.js";import{V as X}from"./VSelect.e2438bf0.js";import{V as P}from"./VSwitch.8f64b25b.js";import{V as Y}from"./VNavigationDrawer.e49588b6.js";import{_ as me}from"./Confirmer.1430bfc4.js";import{u as pe}from"./categoryStore.d5aaa3c1.js";import{V as M}from"./VChip.15e3c72f.js";import"./VDivider.4e5147ee.js";import"./axios.8204d459.js";import"./form.b198e9eb.js";import"./index.0b83b8d8.js";import"./VInput.a1b5a69b.js";import"./VList.2e46a22e.js";import"./dialog-transition.fc2767b3.js";import"./VMenu.cc85e129.js";import"./VCheckboxBtn.f5856159.js";import"./VSelectionControl.08ac7448.js";import"./ssrBoot.06a3cbcc.js";import"./VDialog.6706085a.js";const _e={class:"d-flex align-center pa-6 pb-1"},fe=A("h6",{class:"text-h6"}," Add Question ",-1),ce={__name:"FormCreate",props:{isCreateFormOpened:{default:null,required:!0},question:{default:{id:null}},categories:{type:Array}},emits:["update:isCreateFormOpened","formSubmitted"],setup(x,{emit:c}){const u=x,S=re(),F=m(!1),y=m(null),o=se({title_uz:"",title_ru:"",title_en:"",prompt_uz:null,prompt_ru:null,prompt_en:null,is_multiple:0,question_type:"checkbox",category_id:S.params.category,status:1,order:null});m([{id:u.question.id,title:u.question.title_uz}]),m({id:u.question.id,title:u.question.title_uz});const g=()=>{c("update:isCreateFormOpened",!1),D(()=>{v()})},v=()=>{var f,r;(f=y.value)==null||f.reset(),o.title_uz="",o.title_ru="",o.title_en="",o.prompt_uz=null,o.prompt_ru=null,o.prompt_en=null,o.order=null,(r=y.value)==null||r.resetValidation()},k=()=>{var f;(f=y.value)==null||f.validate().then(({valid:r})=>{if(r){const i={title_uz:o.title_uz,title_ru:o.title_ru,title_en:o.title_en,prompt_uz:o.prompt_uz,prompt_ru:o.prompt_ru,prompt_en:o.prompt_en,category_id:o.category_id,question_type:o.question_type,is_multiple:o.is_multiple,status:o.status,order:o.order};c("formSubmitted",i),c("update:isCreateFormOpened",!1),D(()=>{v()})}})},w=f=>{c("update:isCreateFormOpened",f)};return(f,r)=>{const i=J;return z(),T(Y,{permanent:"",width:1e3,location:"end",class:"scrollable-content","model-value":u.isCreateFormOpened,"onUpdate:modelValue":w},{default:t(()=>[A("div",_e,[fe,e(L),e(b,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:g},{default:t(()=>[e(I,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(B),{options:{wheelPropagation:!1}},{default:t(()=>[e(j,{flat:""},{default:t(()=>[e(H,null,{default:t(()=>[e(W,{ref_key:"refquestionCreateForm",ref:y,modelValue:a(F),"onUpdate:modelValue":r[10]||(r[10]=l=>$(F)?F.value=l:null),onSubmit:G(k,["prevent"])},{default:t(()=>[e(V,null,{default:t(()=>[e(n,{cols:"4"},{default:t(()=>[e(C,{modelValue:a(o).title_uz,"onUpdate:modelValue":r[0]||(r[0]=l=>a(o).title_uz=l),rules:[a(U)],label:"Title Uz"},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"4"},{default:t(()=>[e(C,{modelValue:a(o).title_ru,"onUpdate:modelValue":r[1]||(r[1]=l=>a(o).title_ru=l),rules:[a(U)],label:"Title Ru"},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"4"},{default:t(()=>[e(C,{modelValue:a(o).title_en,"onUpdate:modelValue":r[2]||(r[2]=l=>a(o).title_en=l),rules:[a(U)],label:"Title En"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(i,{label:"Prompt uz",modelValue:a(o).prompt_uz,"onUpdate:modelValue":r[3]||(r[3]=l=>a(o).prompt_uz=l)},null,8,["modelValue"])]),_:1}),e(n,{cols:"12"},{default:t(()=>[e(i,{label:"Prompt Ru",modelValue:a(o).prompt_ru,"onUpdate:modelValue":r[4]||(r[4]=l=>a(o).prompt_ru=l)},null,8,["modelValue"])]),_:1}),e(n,{cols:"12"},{default:t(()=>[e(i,{label:"Prompt En",modelValue:a(o).prompt_en,"onUpdate:modelValue":r[5]||(r[5]=l=>a(o).prompt_en=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{class:"mt-4"},{default:t(()=>[e(n,{cols:"6",md:"6"},{default:t(()=>[e(C,{modelValue:a(o).order,"onUpdate:modelValue":r[6]||(r[6]=l=>a(o).order=l),rules:[a(U)],label:"Order"},null,8,["modelValue","rules"])]),_:1}),a(S).params.category?N("",!0):(z(),T(n,{key:0,cols:"6",md:"6"},{default:t(()=>[e(X,{modelValue:a(o).category_id,"onUpdate:modelValue":r[7]||(r[7]=l=>a(o).category_id=l),items:x.categories,"item-title":"title","item-value":"id",label:"Category Id"},null,8,["modelValue","items"])]),_:1}))]),_:1}),e(V,{class:"mt-4"},{default:t(()=>[e(n,{cols:"6",md:"6"},{default:t(()=>[e(P,{modelValue:a(o).status,"onUpdate:modelValue":r[8]||(r[8]=l=>a(o).status=l),label:"Status",value:1,color:"primary"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6",md:"4"},{default:t(()=>[e(P,{modelValue:a(o).is_multiple,"onUpdate:modelValue":r[9]||(r[9]=l=>a(o).is_multiple=l),label:"Is Multiple",value:1,color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(b,{type:"submit",class:"me-3",color:"success"},{default:t(()=>[O(" Submit ")]),_:1}),e(b,{type:"reset",variant:"tonal",color:"error",onClick:g},{default:t(()=>[O(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Ve={class:"d-flex align-center pa-6 pb-1"},be=A("h6",{class:"text-h6"}," Update Question ",-1),ve={__name:"FormUpdate",props:{isUpdateFormOpened:{default:null,required:!0},question:{type:Object},categories:{type:Array}},emits:["update:isUpdateFormOpened","formSubmitted"],setup(x,{emit:c}){const u=x,{questions:S,question:F,loading:y,error:o}=K(E());E(),m([{id:null,title:null}]),m(null);const g=m(!1),v=m(null);m({filter:{parent_id:null}});const k=()=>{c("update:isUpdateFormOpened",!1),D(()=>{w()})},w=()=>{var i,l;(i=v.value)==null||i.reset(),u.question.prompt_uz=null,u.question.prompt_ru=null,u.question.prompt_en=null,(l=v.value)==null||l.resetValidation()},f=()=>{var i;(i=v.value)==null||i.validate().then(({valid:l})=>{l&&(c("formSubmitted",{title_uz:u.question.title_uz,title_ru:u.question.title_ru,title_en:u.question.title_en,prompt_uz:u.question.prompt_uz,prompt_ru:u.question.prompt_ru,prompt_en:u.question.prompt_en,category_id:u.question.category_id,is_multiple:u.question.is_multiple,status:u.question.status,order:u.question.order}),c("update:isUpdateFormOpened",!1),D(()=>{w()}))})},r=i=>{c("update:isUpdateFormOpened",i)};return(i,l)=>{const q=J;return z(),T(Y,{permanent:"",width:1e3,location:"end",class:"scrollable-content","model-value":u.isUpdateFormOpened,"onUpdate:modelValue":r},{default:t(()=>[A("div",Ve,[be,e(L),e(b,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:k},{default:t(()=>[e(I,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(B),{options:{wheelPropagation:!1}},{default:t(()=>[e(j,{flat:""},{default:t(()=>[e(H,null,{default:t(()=>[e(W,{ref_key:"refQuestionCreateForm",ref:v,modelValue:a(g),"onUpdate:modelValue":l[10]||(l[10]=s=>$(g)?g.value=s:null),onSubmit:G(f,["prevent"])},{default:t(()=>[e(V,null,{default:t(()=>[e(n,{cols:"4"},{default:t(()=>[e(C,{modelValue:u.question.title_uz,"onUpdate:modelValue":l[0]||(l[0]=s=>u.question.title_uz=s),rules:[a(U)],label:"Title Uz"},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"4"},{default:t(()=>[e(C,{modelValue:u.question.title_ru,"onUpdate:modelValue":l[1]||(l[1]=s=>u.question.title_ru=s),rules:[a(U)],label:"Title Ru"},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"4"},{default:t(()=>[e(C,{modelValue:u.question.title_en,"onUpdate:modelValue":l[2]||(l[2]=s=>u.question.title_en=s),rules:[a(U)],label:"Title En"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(q,{label:"Prompt uz",modelValue:u.question.prompt_uz,"onUpdate:modelValue":l[3]||(l[3]=s=>u.question.prompt_uz=s)},null,8,["modelValue"])]),_:1}),e(n,{cols:"12"},{default:t(()=>[e(q,{label:"Prompt Ru",modelValue:u.question.prompt_ru,"onUpdate:modelValue":l[4]||(l[4]=s=>u.question.prompt_ru=s)},null,8,["modelValue"])]),_:1}),e(n,{cols:"12"},{default:t(()=>[e(q,{label:"Prompt En",modelValue:u.question.prompt_en,"onUpdate:modelValue":l[5]||(l[5]=s=>u.question.prompt_en=s)},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{class:"mt-4"},{default:t(()=>[e(n,{cols:"6",md:"6"},{default:t(()=>[e(C,{modelValue:u.question.order,"onUpdate:modelValue":l[6]||(l[6]=s=>u.question.order=s),rules:[a(U)],label:"Order"},null,8,["modelValue","rules"])]),_:1}),u.question.category_id!==null?(z(),T(n,{key:0,cols:"6",md:"6"},{default:t(()=>[e(X,{modelValue:a(F).category_id,"onUpdate:modelValue":l[7]||(l[7]=s=>a(F).category_id=s),items:x.categories,"item-title":"title","item-value":"id",label:"Category Id"},null,8,["modelValue","items"])]),_:1})):N("",!0)]),_:1}),e(V,{class:"mt-4"},{default:t(()=>[e(n,{cols:"6",md:"6"},{default:t(()=>[e(P,{modelValue:u.question.status,"onUpdate:modelValue":l[8]||(l[8]=s=>u.question.status=s),label:"Status",value:1,color:"primary"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6",md:"4"},{default:t(()=>[e(P,{modelValue:u.question.is_multiple,"onUpdate:modelValue":l[9]||(l[9]=s=>u.question.is_multiple=s),label:"Is Multiple",value:1,color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(b,{type:"submit",class:"me-3",color:"success"},{default:t(()=>[O(" Submit ")]),_:1}),e(b,{type:"reset",variant:"tonal",color:"error",onClick:k},{default:t(()=>[O(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Je={__name:"list",setup(x){const{questions:c,question:u,loading:S,error:F,pagination:y}=K(E()),{fetchQuestions:o,addQuestion:g,fetchQuestion:v,updateQuestion:k,deleteQuestion:w}=E(),{fetchCategories:f}=pe(),r={title:"Questions",headers:["id","title_uz","title_ru","title_en","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},i=m(!1),l=m(!1),q=m(!1),s=m(null),Q=m({filter:{}}),R=m([]);o(Q.value);const Z=()=>{o(Q.value)},h=()=>{w(s.value).then(p=>{q.value=!1,o(Q.value)})},ee=p=>{q.value=!0,s.value=p},te=p=>{console.log("sa"),i.value=p.isCreateFormOpened},le=p=>{v(p.qustionId).then(_=>{l.value=p.isUpdateFormOpened})},oe=p=>{g(p).then(_=>{o(Q.value)})},ae=p=>{k(u.value.id,p).then(_=>{o(Q.value)})};return ne(()=>{f().then(p=>{p.data.result.data.forEach(_=>{let d={id:_.id,title:_.title_uz};R.value.push(d)})})}),(p,_)=>(z(),ie("section",null,[e(de,{onPageChanged:Z,body:{data:a(c).data,pagination:a(y)},loading:a(S),tableData:r},{pageActions:t(()=>[e(V,null,{default:t(()=>[e(n,{cols:"2",offset:"md-10"},{default:t(()=>[e(b,{"prepend-icon":"tabler-plus",onClick:_[0]||(_[0]=d=>te({isCreateFormOpened:!0}))},{default:t(()=>[O(" Create ")]),_:1})]),_:1})]),_:1})]),status:t(d=>[d.item.status===1?(z(),T(M,{key:0,color:"success"},{default:t(()=>[O(" Active ")]),_:1})):d.item.status===0?(z(),T(M,{key:1,color:"error"},{default:t(()=>[O(" Inactive ")]),_:1})):N("",!0)]),actions:t(d=>[e(b,{onClick:ue=>le({isUpdateFormOpened:!0,qustionId:d.item.id}),icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(I,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(b,{icon:"",onClick:ue=>ee(d.item.id),size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(I,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(b,{icon:"",to:{name:"assessment-question-parent-children",params:{parent:d.item.id}},size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(I,{size:"22",icon:"mdi-open-in-app"})]),_:2},1032,["to"])]),_:1},8,["body","loading"]),e(ce,{onFormSubmitted:oe,categories:a(R),isCreateFormOpened:a(i),"onUpdate:isCreateFormOpened":_[1]||(_[1]=d=>$(i)?i.value=d:null)},null,8,["categories","isCreateFormOpened"]),e(ve,{onFormSubmitted:ae,question:a(u),categories:a(R),isUpdateFormOpened:a(l),"onUpdate:isUpdateFormOpened":_[2]||(_[2]=d=>$(l)?l.value=d:null)},null,8,["question","categories","isUpdateFormOpened"]),e(me,{isOpen:a(q),"onUpdate:isOpen":_[3]||(_[3]=d=>$(q)?q.value=d:null),loading:a(S),onAccepted:h},null,8,["isOpen","loading"])]))}};export{Je as default};
