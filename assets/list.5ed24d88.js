import{bc as g,k as V,D as F,o as _,c as P,p as e,w as t,m as a,A as E,q as n,b4 as Q,b1 as G,bh as H,z as r,x as d,b as I,a$ as y,bj as J,b7 as N,aP as j}from"./index.ff6dd18a.js";import{_ as K}from"./DataTable.8386c370.js";import{u as T}from"./clientApplicationStore.40b18243.js";import{u as L}from"./coreInspectionInfos.e5967e88.js";import{u as R}from"./coreInspectorInfos.641dbf1d.js";import{u as q}from"./systemUserStore.b11465e5.js";import{V as W}from"./VSpacer.9cd97db6.js";import{V as A}from"./VBtn.05c82630.js";import{V as X,a as m,b as f}from"./VList.12bf040d.js";import{V as x}from"./VChip.34758a01.js";import{V as Y}from"./VDivider.709f44be.js";import{V as Z}from"./VForm.5de4a92d.js";import{V as ee,a as U}from"./VRow.6a3eb9e0.js";import{V as M}from"./VSelect.cdb6d5f2.js";import{V as te}from"./VNavigationDrawer.64c65f66.js";import"./axios.544a54a6.js";import"./index.f6fb5e9e.js";import"./form.03636cd0.js";import"./VTextField.afb07e72.js";import"./VInput.31ae3301.js";import"./dialog-transition.2a00a3c9.js";import"./VMenu.901c1049.js";import"./VCheckboxBtn.3329c02d.js";import"./VSelectionControl.82c875c1.js";import"./ssrBoot.051a63f0.js";const ae={class:"d-flex align-center pa-6 pb-1"},le=a("h6",{class:"text-h6"}," Info details ",-1),se={class:"text-base font-weight-semibold"},oe={class:"text-body-2"},ne={class:"text-base font-weight-semibold"},ie={class:"text-body-2"},pe={class:"text-base font-weight-semibold"},ce={class:"text-body-2"},re=a("h6",{class:"text-base font-weight-semibold"}," Text: ",-1),ue={class:"text-body-2"},de=a("h6",{class:"text-base font-weight-semibold"}," Inspection name: ",-1),me={class:"text-base font-weight-semibold"},fe={class:"text-body-2"},_e={class:"text-base font-weight-semibold"},be={__name:"ApplicationInfo",props:{isInfoDrawerOpened:{default:null,required:!0},coreInspections:{type:Object},appealApplicationDetails:{type:Object}},emits:["update:isInfoDrawerOpened","fetchApplications","formSubmitted"],setup(B,{emit:u}){const l=B;R();const{fetchUsers:v}=q(),{updateAppealApplication:$}=T(),{coreInfos:S}=g(R()),{users:C}=g(q()),i=V(l.appealApplicationDetails.inspection_id),p=V(null),k=()=>{u("update:isInfoDrawerOpened",!1),j(()=>{D()})},D=()=>{i.value=null,p.value=null,S.value=[]},O=()=>{let o={inspection_id:i.value,inspector_id:p.value};$(l.appealApplicationDetails.id,o).then(c=>{c.data.success&&(u("update:isInfoDrawerOpened",!1),u("fetchApplications"),j(()=>{D()}))})},h=o=>{u("update:isInfoDrawerOpened",o)},z=()=>{let o={filter:{inspection_id:i.value}};return v(o)};return F(i,async(o,c)=>{p.value=null,z()}),F(()=>l.appealApplicationDetails,(o,c)=>{i.value=o.inspection_id}),(o,c)=>(_(),P("div",null,[e(te,{permanent:"",width:700,location:"end",class:"scrollable-content","model-value":l.isInfoDrawerOpened,"onUpdate:modelValue":h},{default:t(()=>[a("div",ae,[le,e(W),e(A,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:k},{default:t(()=>[e(E,{size:"18",icon:"tabler-x"})]),_:1})]),e(n(Q),{options:{wheelPropagation:!1}},{default:t(()=>[e(G,{flat:""},{default:t(()=>[e(H,null,{default:t(()=>[e(X,null,{default:t(()=>[e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[a("h6",se,[r(" id: "),a("span",oe,d(l.appealApplicationDetails.id),1)])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[a("h6",ne,[r(" Full name: "),a("span",ie,d(l.appealApplicationDetails.full_name),1)])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[a("h6",pe,[r(" Passport: "),a("span",ce,d(l.appealApplicationDetails.passport_serial),1)])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[re]),_:1}),a("p",null,[a("span",ue,d(l.appealApplicationDetails.appeal_text),1)])]),_:1}),e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[de]),_:1}),a("p",null,d(l.appealApplicationDetails.inspection_name),1)]),_:1}),e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[a("h6",me,[r(" Status: "),a("span",fe,[l.appealApplicationDetails.status==="new"?(_(),I(x,{key:0,color:"success"},{default:t(()=>[r(d(l.appealApplicationDetails.status),1)]),_:1})):y("",!0)])])]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[a("h6",_e,[r(" Document: "),a("span",null,[e(A,{icon:"tabler-download",size:"small"})])])]),_:1})]),_:1})]),_:1}),e(Y),e(Z,{class:"mt-4",onSubmit:J(O,["prevent"])},{default:t(()=>[e(ee,null,{default:t(()=>[e(U,{cols:"12"},{default:t(()=>[e(M,{items:l.coreInspections.data,modelValue:n(i),"onUpdate:modelValue":c[0]||(c[0]=b=>N(i)?i.value=b:null),"item-title":"info.name_uz","item-value":"id",label:"Inspection",density:"compact"},null,8,["items","modelValue"])]),_:1}),e(U,{cols:"12"},{default:t(()=>[n(C).data?(_(),I(M,{key:0,items:n(C).data,modelValue:n(p),"onUpdate:modelValue":c[1]||(c[1]=b=>N(p)?p.value=b:null),"item-title":"username","item-value":"id",label:"Inspectors",density:"compact"},null,8,["items","modelValue"])):y("",!0)]),_:1}),e(U,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(A,{type:"submit"},{default:t(()=>[r(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])]))}},Pe={__name:"list",setup(B){const u=V(!1),l=V({}),{appealApplications:v,appealApplication:$,loading:S,error:C,pagination:i}=g(T()),{fetchAppealApplications:p}=T(),{fetchCoreInsInfos:k}=L(),{coreInsInfos:D}=g(L()),O={title:"Appeal Applications",headers:["id","appeal_text","phone","type","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},h=V({filter:{parent_id:null}});p(h.value),k({getAll:!0});const z=()=>{p(h.value)},o=b=>{const w=v.value.data.filter(s=>s.id===b);l.value=w[0],u.value=!0},c=()=>{p(h.value)};return(b,w)=>(_(),P("section",null,[e(K,{onPageChanged:z,body:{data:n(v).data,pagination:n(i)},loading:n(S),tableData:O},{type:t(s=>[s.item.type?(_(),I(x,{key:0,color:"success"},{default:t(()=>[r(d(s.item.type),1)]),_:2},1024)):y("",!0)]),status:t(s=>[s.item.status==="new"?(_(),I(x,{key:0,color:"success"},{default:t(()=>[r(d(s.item.status),1)]),_:2},1024)):s.item.status==="processing"?(_(),I(x,{key:1,color:"warning"},{default:t(()=>[r(d(s.item.status),1)]),_:2},1024)):y("",!0)]),actions:t(s=>[e(A,{icon:"",onClick:he=>o(s.item.id),size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(E,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])]),_:1},8,["body","loading"]),e(be,{onFetchApplications:c,appealApplicationDetails:n(l),coreInspections:n(D),isInfoDrawerOpened:n(u),"onUpdate:isInfoDrawerOpened":w[0]||(w[0]=s=>N(u)?u.value=s:null)},null,8,["appealApplicationDetails","coreInspections","isInfoDrawerOpened"])]))}};export{Pe as default};
