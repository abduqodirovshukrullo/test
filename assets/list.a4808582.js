import{k as w,o as S,c as T,p as e,w as t,m as l,A as $,q as h,b4 as B,b1 as E,bh as F,z as r,x as u,bj as U,aP as C,bb as L,bc as R,b as z,a$ as j,b7 as q,bs as k}from"./index.d0376abb.js";import{_ as A}from"./DataTable.1b688fa1.js";import{u as M}from"./sendedDocumentStore.f3d9e7ed.js";import{V as Q}from"./VSpacer.cba7ed72.js";import{V as x}from"./VBtn.88bd5865.js";import{V as G,a as p,b as _}from"./VList.3972f313.js";import{V as H}from"./VDivider.17d044d3.js";import{V as J}from"./VForm.7b3aef50.js";import{V as K,a as W}from"./VRow.3bbc78cc.js";import{V as X}from"./VNavigationDrawer.c54447bf.js";import{a as D}from"./axios.956cc88e.js";import{V as O}from"./VChip.87002366.js";import"./index.852e8fad.js";import"./form.af4ba2ee.js";import"./ssrBoot.8a991bad.js";const Y={class:"d-flex align-center pa-6 pb-1"},Z=l("h6",{class:"text-h6"}," Info details ",-1),ee={class:"text-base font-weight-semibold"},te={class:"text-body-2"},ae={class:"text-base font-weight-semibold"},ne={class:"text-body-2"},se=l("h6",{class:"text-base font-weight-semibold"}," Text: ",-1),oe={class:"text-body-2"},le=l("h6",{class:"text-base font-weight-semibold"}," Inspection name: ",-1),ie={class:"text-base font-weight-semibold"},de={class:"text-base font-weight-semibold"},re={class:"text-body-2"},ue={__name:"DocumentInfo",props:{isInfoDrawerOpened:{default:null,required:!0},documentDetails:{type:Object}},emits:["update:isInfoDrawerOpened","fetchEnrols","formSubmitted"],setup(i,{emit:s}){const n=i,{updateSendedDocument:a}=M(),o=w(n.documentDetails.inspection_id),c=w(null),y=()=>{s("update:isInfoDrawerOpened",!1),C(()=>{g()})},b=()=>{let f={inspection_id:o.value,inspector_id:c.value};a(n.documentDetails.id,f).then(V=>{V.data.success&&(s("update:isInfoDrawerOpened",!1),s("fetchEnrols"),C(()=>{g()}))})},m=f=>{s("update:isInfoDrawerOpened",f)},g=()=>{o.value=null,c.value=null};return(f,V)=>(S(),T("div",null,[e(X,{permanent:"",width:500,location:"end",class:"scrollable-content","model-value":n.isInfoDrawerOpened,"onUpdate:modelValue":m},{default:t(()=>[l("div",Y,[Z,e(Q),e(x,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:y},{default:t(()=>[e($,{size:"18",icon:"tabler-x"})]),_:1})]),e(h(B),{options:{wheelPropagation:!1}},{default:t(()=>[e(E,{flat:""},{default:t(()=>[e(F,null,{default:t(()=>[e(G,null,{default:t(()=>[e(p,null,{default:t(()=>[e(_,null,{default:t(()=>[l("h6",ee,[r(" id: "),l("span",te,u(n.documentDetails.id),1)])]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(_,null,{default:t(()=>[l("h6",ae,[r(" Full name: "),l("span",ne,u(n.documentDetails.full_name),1)])]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(_,null,{default:t(()=>[se]),_:1}),l("p",null,[l("span",oe,u(n.documentDetails.comment_text),1)])]),_:1}),e(p,null,{default:t(()=>[e(_,null,{default:t(()=>[le]),_:1}),l("p",null,u(n.documentDetails.inspection_name),1)]),_:1}),e(p,null,{default:t(()=>[e(_,null,{default:t(()=>[l("h6",ie,[r(" Document: "),l("span",null,[e(x,{icon:"tabler-download",size:"small"})])])]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(_,null,{default:t(()=>[l("h6",de,[r(" Status: "),l("span",re,u(n.documentDetails.status),1)])]),_:1})]),_:1})]),_:1}),e(H),e(J,{class:"mt-4",onSubmit:U(b,["prevent"])},{default:t(()=>[e(K,null,{default:t(()=>[e(W,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(x,{type:"submit"},{default:t(()=>[r(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])]))}},P=L("SendedDocumentStore",{state:()=>({pagination:{meta:{}},filter:{},documents:[],document:{title_uz:"",title_ru:"",title_en:"",description_uz:"",description_ru:"",description_en:"",content_uz:"",content_ru:"",content_en:"",parent_id:null,status:1,order:null},loading:!1,error:""}),actions:{fetchSendedDocuments(i){return this.loading=!0,i={...{page:this.pagination.meta.current_page,per_page:this.pagination.meta.per_page},...i},new Promise((n,a)=>{D.get("dashboard/user/document",{params:i}).then(o=>{this.documents=o.data.result,this.pagination.meta=o.data.result.meta,n(o)}).catch(o=>{this.error=o,a(o)}).finally(()=>{this.loading=!1})})},fetchSendedDocument(i){return new Promise((s,n)=>{D.get(`/dashboard/user/document/${i}`).then(a=>{this.appealInspector=a.data.result,s(a.data.result)}).catch(a=>{this.error=a,n(a)}).finally(()=>{this.loading=!1})})},addSendedDocument(i){return this.loading=!0,new Promise((s,n)=>{D.post("/dashboard/user/document",i,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>s(a)).catch(a=>{this.error=a,n(a)}).finally(()=>{this.loading=!1})})},updateSendedDocument(i,s){return this.loading=!0,new Promise((n,a)=>{D.post("/dashboard/user/document/"+i+"?_method=PUT",s,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>n(o)).catch(o=>{this.error=o,a(o)}).finally(()=>{this.loading=!1})})},deleteSendedDocument(i){return this.loading=!0,new Promise((s,n)=>{D.delete("/dashboard/user/document/"+i).then(a=>s(a)).catch(a=>{this.error=a,n(a)}).finally(()=>{this.loading=!1})})}}}),ce={__name:"list",setup(i){const{documents:s,loading:n,error:a,pagination:o}=R(P()),{fetchSendedDocuments:c}=P(),y={title:"Sended Documents",headers:["id","comment_text","document_url","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},b=w({filter:{parent_id:null}}),m=w(!1),g=w({});c(b.value);const f=()=>{c(b.value)},V=()=>{c(b.value)},N=I=>{const v=s.value.data.filter(d=>d.id===I);g.value=v[0],m.value=!0};return(I,v)=>(S(),T("section",null,[e(A,{onPageChanged:f,body:{data:h(s).data,pagination:h(o)},loading:h(n),tableData:y},{status:t(d=>[d.item.status==="new"?(S(),z(O,{key:0,color:"primary"},{default:t(()=>[r(u(d.item.status),1)]),_:2},1024)):d.item.status==="processing"?(S(),z(O,{key:1,color:"warning"},{default:t(()=>[r(u(d.item.status),1)]),_:2},1024)):j("",!0)]),document_url:t(d=>[e(x,{variant:"tonal",icon:"tabler-download",color:"success",size:"small"})]),actions:t(d=>[e(x,{icon:"",size:"x-small",color:"default",variant:"text",onClick:me=>N(d.item.id)},{default:t(()=>[e($,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])]),_:1},8,["body","loading"]),e(ue,{onFetchEnrols:V,documentDetails:h(g),isInfoDrawerOpened:h(m),"onUpdate:isInfoDrawerOpened":v[0]||(v[0]=d=>q(m)?m.value=d:null)},null,8,["documentDetails","isInfoDrawerOpened"])]))}};typeof k=="function"&&k(ce);export{ce as default};
