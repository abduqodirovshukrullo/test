import{bb as $,o as I,c as O,p as t,w as e,m as n,A as k,q as p,b4 as B,b1 as T,bh as U,z as b,x as c,bj as A,aP as R,bc as F,k as D,b as C,a$ as j,b7 as q}from"./index.d0376abb.js";import{_ as M}from"./DataTable.1b688fa1.js";import{a as h}from"./axios.956cc88e.js";import{V as E}from"./VSpacer.cba7ed72.js";import{V}from"./VBtn.88bd5865.js";import{V as Q,a as u,b as f}from"./VList.3972f313.js";import{V as G}from"./VDivider.17d044d3.js";import{V as H}from"./VForm.7b3aef50.js";import{V as J,a as K}from"./VRow.3bbc78cc.js";import{V as W}from"./VNavigationDrawer.c54447bf.js";import{V as S}from"./VChip.87002366.js";import"./index.852e8fad.js";import"./form.af4ba2ee.js";import"./ssrBoot.8a991bad.js";const v=$("UserRateInspectorStore",{state:()=>({pagination:{meta:{}},filter:{},rateInspectors:[],rateInspector:{user_id:"",inspector_id:"",comment_text:"",rate:"",status:1,order:null},loading:!1,error:""}),actions:{fetchRateInspectors(l){return this.loading=!0,l={...{page:this.pagination.meta.current_page,per_page:this.pagination.meta.per_page},...l},new Promise((s,a)=>{h.get("/dashboard/user/rate",{params:l}).then(i=>{this.rateInspectors=i.data.result,this.pagination.meta=i.data.result.meta,s(i)}).catch(i=>{this.error=i,a(i)}).finally(()=>{this.loading=!1})})},fetchRateInspector(l){return new Promise((o,s)=>{h.get(`/dashboard/user/rate/${l}`).then(a=>{this.rateInspector=a.data.result,o(a.data.result)}).catch(a=>{this.error=a,s(a)}).finally(()=>{this.loading=!1})})},addRateInspector(l){return this.loading=!0,new Promise((o,s)=>{h.post("/dashboard/user/rate",l).then(a=>o(a)).catch(a=>{this.error=a,s(a)}).finally(()=>{this.loading=!1})})},updateRateInspector(l,o){return this.loading=!0,new Promise((s,a)=>{h.put("/dashboard/user/rate/"+l,o).then(i=>s(i)).catch(i=>{this.error=i,a(i)}).finally(()=>{this.loading=!1})})},deleteRateInspector(l){return this.loading=!0,new Promise((o,s)=>{h.delete("/dashboard/user/rate/"+l).then(a=>o(a)).catch(a=>{this.error=a,s(a)}).finally(()=>{this.loading=!1})})}}}),X={class:"d-flex align-center pa-6 pb-1"},Y=n("h6",{class:"text-h6"}," Info details ",-1),Z={class:"text-base font-weight-semibold"},tt={class:"text-body-2"},et={class:"text-base font-weight-semibold"},at={class:"text-body-2"},st=n("h6",{class:"text-base font-weight-semibold"}," Inspector name: ",-1),ot={class:"text-body-2"},nt=n("h6",{class:"text-base font-weight-semibold"}," Comment: ",-1),lt={class:"text-body-2"},it=n("h6",{class:"text-base font-weight-semibold"}," Rate: ",-1),rt={class:"text-body-2"},dt={class:"text-base font-weight-semibold"},ct={__name:"RateInfo",props:{isInfoDrawerOpened:{default:null,required:!0},infoDetails:{type:Object}},emits:["update:isInfoDrawerOpened","fetchList","formSubmitted"],setup(l,{emit:o}){const s=l,{updateRateInspector:a}=v(),i=()=>{o("update:isInfoDrawerOpened",!1),R(()=>{})},w=()=>{let r={status:s.infoDetails.status};a(s.infoDetails.id,r).then(m=>{m.data.success&&(o("update:isInfoDrawerOpened",!1),o("fetchList"),R(()=>{}))})},_=r=>{o("update:isInfoDrawerOpened",r)};return(r,m)=>(I(),O("div",null,[t(W,{permanent:"",width:700,location:"end",class:"scrollable-content","model-value":s.isInfoDrawerOpened,"onUpdate:modelValue":_},{default:e(()=>[n("div",X,[Y,t(E),t(V,{variant:"tonal",color:"error",icon:"",size:"32",class:"rounded",onClick:i},{default:e(()=>[t(k,{size:"18",icon:"tabler-x"})]),_:1})]),t(p(B),{options:{wheelPropagation:!1}},{default:e(()=>[t(T,{flat:""},{default:e(()=>[t(U,null,{default:e(()=>[t(Q,null,{default:e(()=>[t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[n("h6",Z,[b(" id: "),n("span",tt,c(s.infoDetails.id),1)])]),_:1})]),_:1}),t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[n("h6",et,[b(" Full name: "),n("span",at,c(s.infoDetails.author_full_name),1)])]),_:1})]),_:1}),t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[st]),_:1}),n("p",null,[n("span",ot,c(s.infoDetails.inspector_name),1)])]),_:1}),t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[nt]),_:1}),n("p",null,[n("span",lt,c(s.infoDetails.comment_text),1)])]),_:1}),t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[it]),_:1}),n("p",null,[n("span",rt,c(s.infoDetails.rate),1)])]),_:1}),t(u,null,{default:e(()=>[t(f,null,{default:e(()=>[n("h6",dt," Status: "+c(s.infoDetails.status)+" ",1)]),_:1})]),_:1})]),_:1}),t(G),t(H,{class:"mt-4",onSubmit:A(w,["prevent"])},{default:e(()=>[t(J,null,{default:e(()=>[t(K,{cols:"12",class:"d-flex gap-4"},{default:e(()=>[t(V,{type:"submit"},{default:e(()=>[b(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])]))}},Rt={__name:"list",setup(l){const{rateInspectors:o,rateInspector:s,loading:a,error:i,pagination:w}=F(v()),{fetchRateInspectors:_}=v(),r=D(!1),m=D({}),P={title:"Appeal Rate Inspector",headers:["id","inspector_name","comment_text","rate","status","actions"],filter:{title_uz:{model:"title_uz",type:"text",value:"Query"},status:{model:"status",type:"select",value:["Active","Inactive"]}}},x=D({filter:{parent_id:null}});_(x.value);const z=()=>{_(x.value)},L=()=>{_(x.value)},N=y=>{const g=o.value.data.filter(d=>d.id===y);m.value=g[0],r.value=!0};return(y,g)=>(I(),O("section",null,[t(M,{onPageChanged:L,body:{data:p(o).data,pagination:p(w)},loading:p(a),tableData:P},{status:e(d=>[d.item.status===!0?(I(),C(S,{key:0,color:"success"},{default:e(()=>[b(" Active ")]),_:1})):d.item.status===!1?(I(),C(S,{key:1,color:"error"},{default:e(()=>[b(" Inactive ")]),_:1})):j("",!0)]),actions:e(d=>[t(V,{icon:"",onClick:ut=>N(d.item.id),size:"x-small",color:"default",variant:"text"},{default:e(()=>[t(k,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])]),_:1},8,["body","loading"]),t(ct,{onFetchList:z,infoDetails:p(m),isInfoDrawerOpened:p(r),"onUpdate:isInfoDrawerOpened":g[0]||(g[0]=d=>q(r)?r.value=d:null)},null,8,["infoDetails","isInfoDrawerOpened"])]))}};export{Rt as default};
